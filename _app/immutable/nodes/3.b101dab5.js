import{_ as Jt}from"../chunks/preload-helper.41c905a7.js";import{S as Pe,i as Se,s as De,k as A,q as Z,a as W,l as C,m as M,r as K,h as m,c as X,n as p,b as E,G as O,u as me,H as $,I as Q,o as Ge,R as x,L as Ae,M as H,T as Rt,N as ye,j as Ot,U as Mt,e as F,J as Le,V as Ve,W as Ce,w as Ee,K as qe,g as q,v as ue,d as G,f as ce,y as ge,z as be,A as ve,B as ke,X as Ie,Y as we,Z as je,_ as Zt,O as Kt,p as Qt}from"../chunks/index.7c5e5199.js";import{u as se,b as He,p as oe,t as $t,l as xt,a as Ye,i as Qe,c as el}from"../chunks/setup.7065f29a.js";import{w as pe,e as Vt}from"../chunks/singletons.9a88b03a.js";import{p as tl}from"../chunks/stores.ad1012f5.js";const ll=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/template.md":()=>Jt(()=>import("../chunks/template.7b886c63.js"),["../chunks/template.7b886c63.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,i])=>{const n=await i(),{html:r}=n.default.render(),a=t.slice(17,-3),o=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,u=[...r.matchAll(o)].map(c=>c[2]).filter(c=>!c.startsWith("http")).map(c=>{const f=c.lastIndexOf("/");return f!==-1?c.substring(f+1):c});return{meta:n.metadata,path:a,text:r,links:u}}))},sl=async({fetch:s})=>({posts:await(await s("/api/posts")).json()}),il=async()=>(await ll()).sort().map(l=>({slug:l.path.replaceAll("/","")})),is=Object.freeze(Object.defineProperty({__proto__:null,entries:il,load:sl},Symbol.toStringTag,{value:"Module"})),Ze=pe(""),ze=pe(""),Te=pe(!1),Je=pe([]),he=pe([]),Oe=pe([]),Me=pe(0);function $e(s){var i;let e,l=((i=s[0].meta)==null?void 0:i.description)+"",t;return{c(){e=A("div"),t=Z(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(m),this.h()},h(){p(e,"class","description svelte-rrhrf8")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].meta)==null?void 0:a.description)+"")&&me(t,l)},d(n){n&&m(e)}}}function xe(s){let e,l=s[0].meta.author+"",t;return{c(){e=A("div"),t=Z(l),this.h()},l(i){e=C(i,"DIV",{class:!0});var n=M(e);t=K(n,l),n.forEach(m),this.h()},h(){p(e,"class","author svelte-rrhrf8")},m(i,n){E(i,e,n),O(e,t)},p(i,n){n&1&&l!==(l=i[0].meta.author+"")&&me(t,l)},d(i){i&&m(e)}}}function et(s){var n;let e,l,t=((n=new Date(s[0].meta.date))==null?void 0:n.toLocaleDateString(s[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",i;return{c(){e=A("div"),l=A("div"),i=Z(t),this.h()},l(r){e=C(r,"DIV",{class:!0});var a=M(e);l=C(a,"DIV",{class:!0});var o=M(l);i=K(o,t),o.forEach(m),a.forEach(m),this.h()},h(){p(l,"class","date svelte-rrhrf8"),p(e,"class","date svelte-rrhrf8")},m(r,a){E(r,e,a),O(e,l),O(l,i)},p(r,a){var o;a&1&&t!==(t=((o=new Date(r[0].meta.date))==null?void 0:o.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&me(i,t)},d(r){r&&m(e)}}}function nl(s){var S,y,L;let e,l,t,i,n=s[0].meta.title+"",r,a,o,u,c,f,g,d=((S=s[0].meta)==null?void 0:S.description)&&$e(s),v=((y=s[0].meta)==null?void 0:y.author)&&xe(s),b=((L=s[0].meta)==null?void 0:L.date)&&et(s);return{c(){e=A("a"),l=Z("← Index"),t=W(),i=A("h1"),r=Z(n),a=W(),d&&d.c(),o=W(),u=A("div"),v&&v.c(),c=W(),b&&b.c(),f=W(),g=A("div"),this.h()},l(_){e=C(_,"A",{href:!0,class:!0,rel:!0});var w=M(e);l=K(w,"← Index"),w.forEach(m),t=X(_),i=C(_,"H1",{class:!0});var P=M(i);r=K(P,n),P.forEach(m),a=X(_),d&&d.l(_),o=X(_),u=C(_,"DIV",{class:!0});var h=M(u);v&&v.l(h),c=X(h),b&&b.l(h),h.forEach(m),f=X(_),g=C(_,"DIV",{class:!0});var k=M(g);k.forEach(m),this.h()},h(){p(e,"href",Vt+"/"),p(e,"class","index svelte-rrhrf8"),p(e,"rel","noopener noreferrer"),p(i,"class","svelte-rrhrf8"),p(u,"class","metadata svelte-rrhrf8"),p(g,"class","markdown svelte-rrhrf8")},m(_,w){E(_,e,w),O(e,l),E(_,t,w),E(_,i,w),O(i,r),E(_,a,w),d&&d.m(_,w),E(_,o,w),E(_,u,w),v&&v.m(u,null),O(u,c),b&&b.m(u,null),E(_,f,w),E(_,g,w),g.innerHTML=s[1]},p(_,[w]){var P,h,k;w&1&&n!==(n=_[0].meta.title+"")&&me(r,n),(P=_[0].meta)!=null&&P.description?d?d.p(_,w):(d=$e(_),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),(h=_[0].meta)!=null&&h.author?v?v.p(_,w):(v=xe(_),v.c(),v.m(u,c)):v&&(v.d(1),v=null),(k=_[0].meta)!=null&&k.date?b?b.p(_,w):(b=et(_),b.c(),b.m(u,null)):b&&(b.d(1),b=null)},i:$,o:$,d(_){_&&m(e),_&&m(t),_&&m(i),_&&m(a),d&&d.d(_),_&&m(o),_&&m(u),v&&v.d(),b&&b.d(),_&&m(f),_&&m(g)}}}const rl=/\[\^([^\]]+)\]/g;let al=100;function ol(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),s.currentTarget.classList.add("hover")}function fl(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),s.currentTarget.classList.remove("hover")}function ul(s,e,l){const t=l-e;return(s-e)/t*100}function cl(s,e,l){const t=l-e;return e+t*s/100}function dl(s,e,l){let t,i;Q(s,Te,_=>l(8,t=_)),Q(s,Ze,_=>l(9,i=_));let{data:n}=e,{items:r}=e,{scrollTopVal:a}=e,o=n.text,u=1;const f=o.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(_,w,P)=>{if(w.startsWith("http")&!w.startsWith(se))return`<a class="external" target="_blank" href="${w}" title="${P}">${P}</a>`;{let h=decodeURIComponent(w);return`<a class="node-highlite" unique-id="${h}" id="${decodeURIComponent(w)}"
				data-id="${decodeURIComponent(w)}" title="${P}">${P}
				<span class="symbol node" unique-id="${h}" data-id="item_${decodeURIComponent(w)}"
				data-class="${r.filter(k=>k.label==P).map(k=>{var N,B;return(B=(N=k.data)==null?void 0:N["@type"])==null?void 0:B[1]})}">
					</span></a>`}}).replace(rl,(_,w)=>{const P=u++;return`<sup id="fn-${P}"><a href="#fnref-${P}">${P}</a></sup><span id="fn-${P}-content">${w}</span>`}),g=Array.from({length:u-1},(_,w)=>{var k;const P=w+1,h=(k=f.match(new RegExp(`<span id="fn-${P}-content">([^<]+)</span>`)))==null?void 0:k[1];return`<li id="fnref-${P}"> ${h}</li>`}).join(""),d=`${f}
	<ol class="biblio">${g}</ol>`;let v;Ge(async()=>{l(4,v=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),S(v),v.forEach(_=>{_.addEventListener("mouseenter",ol),_.addEventListener("mouseleave",fl),_.addEventListener("click",b)})});function b(_){v.forEach(h=>{const k=h.getAttribute("data-id"),N=document.querySelector(`.node[data-id="${k}"]`);N&&N.classList.remove("clicked"),h.classList.remove("clicked")});const w=_.currentTarget.getAttribute("data-id"),P=document.querySelector(`.node[data-id="${w}"]`);P&&P.classList.toggle("clicked"),_.currentTarget.classList.toggle("clicked"),x(Ze,i=w,i)}function S(_){let w=null;l(4,v=Array.from(_).map(P=>{let h=P.offsetTop;return w!==null&&h<=w?P.adjustedOffsetTop=w+al:P.adjustedOffsetTop=h,w=P.adjustedOffsetTop,P}))}let y=0;function L(_,w){var P,h,k,N,B,U;if(!t){let Y=(P=_==null?void 0:_[y])==null?void 0:P.adjustedOffsetTop,T=(h=_==null?void 0:_[y+1])==null?void 0:h.adjustedOffsetTop,J=(k=_==null?void 0:_[y])==null?void 0:k.getAttribute("data-id"),ae=(N=_==null?void 0:_[y+1])==null?void 0:N.getAttribute("data-id"),V=(B=document.querySelector(`.node[data-id="${J}"]`))==null?void 0:B.offsetTop,ie=(U=document.querySelector(`.node[data-id="${ae}"]`))==null?void 0:U.offsetTop,le=ul(w,Y,T),D=cl(le,V,ie);w>T&&y++,w<Y&&y!=0&&y--;const j=document.querySelector(".links:first-of-type");Y&&T&&j&&le&&D&&(j==null||j.scrollTo({top:D}))}}return s.$$set=_=>{"data"in _&&l(0,n=_.data),"items"in _&&l(2,r=_.items),"scrollTopVal"in _&&l(3,a=_.scrollTopVal)},s.$$.update=()=>{s.$$.dirty&24&&L(v,a)},[n,d,r,a,v]}class _l extends Pe{constructor(e){super(),Se(this,e,dl,nl,De,{data:0,items:2,scrollTopVal:3})}}const Be=pe([]);async function hl(){try{const s=He.includes("http")?He:`${Vt}/${He}`;console.log(`Fetching URL: ${s}`);const e=await fetch(s);if(!e.ok)throw new Error(`Failed to load db: ${e.statusText} (Status: ${e.status})`);const l=e.headers.get("content-type");if(!l||!l.includes("application/json"))throw new Error("Response is not valid JSON");const t=await e.json();Be.set(t.map(i=>{var n,r,a;return{...i,"@id":(a=(r=(n=i["@id"])==null?void 0:n.replace(/\/items\//,"/resources/"))==null?void 0:r.replace(/\/media\//,"/resources/"))==null?void 0:a.replace(/\/item_sets\//,"/resources/")}})),console.log("Database loaded successfully.")}catch(s){console.error("Error loading db.json:",s)}}var ml=0;function pl(){return++ml}var Ke=Function("return this")();typeof Ke.__nextId!="function"&&(Ke.__nextId=pl);function qt(){return"uid-"+Ke.__nextId()}async function gl(s,e){const l=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,t=[];let i;for(;i=l.exec(s);)if(!(i[2].includes("http")&&!i[2].includes(se))){const a=i[3],o=decodeURIComponent(i[2]);t.push({label:a,id:o,url:o,data:[]})}const n=t.filter(a=>a.url).map(a=>a.id);let r=[...bl(n,e)];for(let a=0;a<t.length;a++){const o=t.find(c=>{var f;return(f=r[a])==null?void 0:f["@id"].includes(c.id)}),u=r[a];o&&(o.uniqueId=qt(),o.data=u)}return t}function bl(s,e,l){return e.filter(t=>{const i=t["@id"];return s.find(n=>n==i)}).map(t=>{var i,n,r;return t["@id"]=(r=(n=(i=t["@id"])==null?void 0:i.replace(/\/items\//,"/resources/"))==null?void 0:n.replace(/\/media\//,"/resources/"))==null?void 0:r.replace(/\/item_sets\//,"/resources/"),t})}async function jt(s){let e=[];for(let t=0;t<s.length;t++)if(s[t].data){let i=s[t].data,n=s[t].set||null,r=vl(i,n);e=[...e,...r]}return{...{nodes:e.reduce((t,i)=>(t.find(n=>n.id===i.source)||t.push({id:i.source,title:i.title}),t.find(n=>n.id===i.target)||t.push({id:i.target,title:i.title}),t),[]),links:e}}}function vl(s,e){var o;let l=[],t=s["@id"];e&&l.push({source:e["@id"],target:t,img:((o=s[oe.img[0]])==null?void 0:o[0]["@id"])||Fe(s,oe.img.join(".")),title:s[$t]});let i,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/,a=function(u){var c,f,g,d,v,b,S;for(let y in u)if(y==="@id"||y==="@value"&&(u[oe.title]||u.display_title||u["@id"]||n)){let L=u["@id"];L=L==null?void 0:L.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");const _=u[oe.title]||u.display_title||u["@id"],w=(u==null?void 0:u.thumbnail_url)||((g=(f=u==null?void 0:u[(c=oe.img)==null?void 0:c[0]])==null?void 0:f[0])==null?void 0:g["@id"])||Fe(u,oe.img.join("."));let P=((v=(d=u[void 0])==null?void 0:d.replace("_"," "))==null?void 0:v.replace(r,""))||(i==null?void 0:i.replace(r,""));l.some(k=>k.source===t&&k.target===L)||l.push({source:t,target:L,title:_,img:w,property:P,reverse:n,external:!L.includes(se)})}else typeof u[y]=="object"&&(isNaN(y)&&(i=(S=(b=(y==null?void 0:y.split(":"))[1])==null?void 0:b.split("_"))==null?void 0:S.join(" "),y==="@reverse"&&(n=!0)),a(u[y]))};return a(s),l}function Fe(s,e){return e.split(".").reduce((l,t)=>(l||{})[t],s)}function tt(s,e,l){const t=s.slice();return t[27]=e[l],t}function kl(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(se,""))||"")+"",t;return{c(){e=A("div"),t=Z(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(m),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(se,""))||"")+"")&&me(t,l)},d(n){n&&m(e)}}}function yl(s){let e,l,t,i,n,r,a,o=s[0].title&&lt(s);return{c(){e=A("img"),i=W(),o&&o.c(),n=F(),this.h()},l(u){e=C(u,"IMG",{src:!0,alt:!0,class:!0}),i=X(u),o&&o.l(u),n=F(),this.h()},h(){qe(e.src,l=s[5])||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,c){E(u,e,c),E(u,i,c),o&&o.m(u,c),E(u,n,c),r||(a=[H(e,"load",s[11]),H(e,"error",zt)],r=!0)},p(u,c){c&32&&!qe(e.src,l=u[5])&&p(e,"src",l),c&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,c):(o=lt(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&m(e),u&&m(i),o&&o.d(u),u&&m(n),r=!1,ye(a)}}}function Il(s){let e,l,t,i,n,r,a,o=s[0].title&&st(s);return{c(){e=A("img"),i=W(),o&&o.c(),n=F(),this.h()},l(u){e=C(u,"IMG",{src:!0,alt:!0,class:!0}),i=X(u),o&&o.l(u),n=F(),this.h()},h(){qe(e.src,l=s[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,c){E(u,e,c),E(u,i,c),o&&o.m(u,c),E(u,n,c),r||(a=[H(e,"load",s[11]),H(e,"error",zt)],r=!0)},p(u,c){c&1&&!qe(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),c&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,c):(o=st(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&m(e),u&&m(i),o&&o.d(u),u&&m(n),r=!1,ye(a)}}}function lt(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(se,""))||"")+"",t;return{c(){e=A("div"),t=Z(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(m),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(se,""))||"")+"")&&me(t,l)},d(n){n&&m(e)}}}function st(s){var i;let e,l=((i=s[0].title)==null?void 0:i.replace(se,""))+"",t;return{c(){e=A("div"),t=Z(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(m),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].title)==null?void 0:a.replace(se,""))+"")&&me(t,l)},d(n){n&&m(e)}}}function it(s){let e,l=s[8].essays,t=[];for(let i=0;i<l.length;i+=1)t[i]=nt(tt(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=F()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=F()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);E(i,e,n)},p(i,n){if(n&256){l=i[8].essays;let r;for(r=0;r<l.length;r+=1){const a=tt(i,l,r);t[r]?t[r].p(a,n):(t[r]=nt(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Le(t,i),i&&m(e)}}}function nt(s){let e,l,t,i=s[27].title+"",n,r;return{c(){e=A("a"),l=Z("→"),t=A("em"),n=Z(i),this.h()},l(a){e=C(a,"A",{class:!0,href:!0,target:!0,rel:!0});var o=M(e);l=K(o,"→"),t=C(o,"EM",{});var u=M(t);n=K(u,i),u.forEach(m),o.forEach(m),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",r=s[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(a,o){E(a,e,o),O(e,l),O(e,t),O(t,n)},p(a,o){o&256&&i!==(i=a[27].title+"")&&me(n,i),o&256&&r!==(r=a[27].url)&&p(e,"href",r)},d(a){a&&m(e)}}}function rt(s){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?El:wl}let t=l(s),i=t(s);return{c(){i.c(),e=F()},l(n){i.l(n),e=F()},m(n,r){i.m(n,r),E(n,e,r)},p(n,r){t===(t=l(n))&&i?i.p(n,r):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){i.d(n),n&&m(e)}}}function wl(s){let e,l,t;return{c(){e=A("a"),l=Z("→ Metadata"),this.h()},l(i){e=C(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=K(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/item/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){E(i,e,n),O(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/item/${i[4]}`)&&p(e,"href",t)},d(i){i&&m(e)}}}function El(s){let e,l,t;return{c(){e=A("a"),l=Z("→ Metadata"),this.h()},l(i){e=C(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=K(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/media/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){E(i,e,n),O(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/media/${i[4]}`)&&p(e,"href",t)},d(i){i&&m(e)}}}function Pl(s){let e,l,t,i,n,r;function a(g,d){return g[0].img?Il:g[5]?yl:kl}let o=a(s),u=o(s),c=s[8]!=null&&it(s),f=s[3]&&rt(s);return{c(){e=A("div"),u.c(),l=W(),c&&c.c(),t=W(),f&&f.c(),this.h()},l(g){e=C(g,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=M(e);u.l(d),l=X(d),c&&c.l(d),t=X(d),f&&f.l(d),d.forEach(m),this.h()},h(){p(e,"class","node svelte-189mvtg"),p(e,"title",i=s[0].title),p(e,"source",s[9]),p(e,"target",s[4]),p(e,"data-id",s[4]),Ae(e,"selected",s[7]),Ae(e,"linkToEssay",s[8]!=null)},m(g,d){E(g,e,d),u.m(e,null),O(e,l),c&&c.m(e,null),O(e,t),f&&f.m(e,null),s[20](e),n||(r=[H(e,"mouseover",s[21]),H(e,"mouseleave",function(){Rt(s[13](s[4]))&&s[13](s[4]).apply(this,arguments)}),H(e,"click",s[17]),H(e,"keydown",s[18]),H(e,"focus",s[19])],n=!0)},p(g,[d]){s=g,o===(o=a(s))&&u?u.p(s,d):(u.d(1),u=o(s),u&&(u.c(),u.m(e,l))),s[8]!=null?c?c.p(s,d):(c=it(s),c.c(),c.m(e,t)):c&&(c.d(1),c=null),s[3]?f?f.p(s,d):(f=rt(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&1&&i!==(i=s[0].title)&&p(e,"title",i),d&512&&p(e,"source",s[9]),d&16&&p(e,"target",s[4]),d&16&&p(e,"data-id",s[4]),d&128&&Ae(e,"selected",s[7]),d&256&&Ae(e,"linkToEssay",s[8]!=null)},i:$,o:$,d(g){g&&m(e),u.d(),c&&c.d(),f&&f.d(),s[20](null),n=!1,ye(r)}}}function zt(s){s.target.style.display="none"}function Sl(s,e,l){let t,i,n,r,a,o,u=$,c=()=>(u(),u=Ve(y,D=>l(23,o=D)),y),f,g=$,d=()=>(g(),g=Ve(L,D=>l(24,f=D)),L),v,b;Q(s,he,D=>l(16,a=D)),Q(s,Ze,D=>l(25,v=D)),Q(s,ze,D=>l(10,b=D)),s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>g());let{datum:S}=e,{entities:y}=e;c();let{updatePosition:L}=e;d();let{essaysItems:_}=e,{site:w}=e,{openNode:P}=e,h,k=null;Ot(()=>{const D=S.source;D==`item_${v}`&&D!=k&&P(S,1),k=`item_${v}`}),Mt(()=>{x(L,f=!0,f)});function N(){x(L,f=!0,f)}function B(D){var fe,I;const j=D,R=o.find(z=>z["@id"]==j);return((I=(fe=R==null?void 0:R[oe.img[0]])==null?void 0:fe[0])==null?void 0:I["@id"])||Fe(R,oe.img.join("."))}let U;function Y(D){const j=D,R=document.querySelector(`.node-highlite[data-id="${j}"]`);R&&R.classList.add("hover"),U.classList.add("hover")}function T(D){const j=D,R=document.querySelector(`.node-highlite[data-id="${j}"]`);R&&R.classList.remove("hover"),U.classList.remove("hover")}function J(D){Ce.call(this,s,D)}function ae(D){Ce.call(this,s,D)}function V(D){Ce.call(this,s,D)}function ie(D){Ee[D?"unshift":"push"](()=>{U=D,l(6,U)})}const le=()=>{x(ze,b=i,b),Y(i)};return s.$$set=D=>{"datum"in D&&l(0,S=D.datum),"entities"in D&&c(l(1,y=D.entities)),"updatePosition"in D&&d(l(2,L=D.updatePosition)),"essaysItems"in D&&l(14,_=D.essaysItems),"site"in D&&l(3,w=D.site),"openNode"in D&&l(15,P=D.openNode)},s.$$.update=()=>{s.$$.dirty&1&&l(5,h=B(S.target)),s.$$.dirty&1&&l(9,t=S==null?void 0:S.source),s.$$.dirty&1&&l(4,i=S==null?void 0:S.target),s.$$.dirty&16400&&l(8,n=_.find(D=>D.id==i)),s.$$.dirty&65537&&l(7,r=a.some(D=>(D==null?void 0:D.id)==S.target))},[S,y,L,w,i,h,U,r,n,t,b,N,Y,T,_,P,a,J,ae,V,ie,le]}class Ft extends Pe{constructor(e){super(),Se(this,e,Sl,Pl,De,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}function Dl(s){let e,l,t;return{c(){e=A("div"),this.h()},l(i){e=C(i,"DIV",{source:!0,target:!0}),M(e).forEach(m),this.h()},h(){p(e,"source",l=s[0].source),p(e,"target",t=s[0].target)},m(i,n){E(i,e,n),s[8](e)},p(i,[n]){n&1&&l!==(l=i[0].source)&&p(e,"source",l),n&1&&t!==(t=i[0].target)&&p(e,"target",t)},i:$,o:$,d(i){i&&m(e),s[8](null)}}}let at=0;function Tl(s,e,l){let t,i,n,r,a=$,o=()=>(a(),a=Ve(d,_=>l(5,r=_)),d),u,c;Q(s,Oe,_=>l(12,n=_)),Q(s,Me,_=>l(6,u=_)),Q(s,he,_=>l(7,c=_)),s.$$.on_destroy.push(()=>a());let{datum:f}=e,{label:g}=e,{updatePosition:d}=e;o();let v,b=qt();Ge(()=>{y()});function S(_,w=0,P){const h=_,k=[...document.querySelectorAll(`.node[data-id="${h}"]`)],N=[];return k.forEach(B=>{const U=B.getBoundingClientRect(),Y={x:U.x+u,y:U.y+w,width:U.width-w/2,height:U.height,selected:"selected"};N.push(Y)}),N}function y(){delete n[b],x(d,r=!1,r);const _=S(f.source,at),w=S(f.target,at);v&&(v.getBoundingClientRect().x,v.getBoundingClientRect().y),_.forEach(P=>{w.forEach(h=>{let k=100;const N=P==null?void 0:P.selected;let B,U,Y,T,J;B=P.x+P.width,U=P.y,Y=h.x,T=h.y,h.x<P.x||h.x==P.x?J=h.x-k*5:h.x==P.x?J=h.x-k*3:J=h.x-k,f.source.includes("item_")&&(J=h.x-k);const ae=B+k,V=U,ie=h.y,le=`M${B},${U}C${ae},${V} ${J},${ie} ${Y},${T}`;x(Oe,n[b]=n[b]||[],n),n[b].push({class:i,d:le,label:g,selected:N,datum:{source:f.source,target:f.target},reverse:f==null?void 0:f.reverse})})})}Mt(()=>{delete n[b],x(Oe,n=[],n)});function L(_){Ee[_?"unshift":"push"](()=>{v=_,l(2,v)})}return s.$$set=_=>{"datum"in _&&l(0,f=_.datum),"label"in _&&l(3,g=_.label),"updatePosition"in _&&o(l(1,d=_.updatePosition))},s.$$.update=()=>{s.$$.dirty&96&&y(),s.$$.dirty&128&&l(4,t=c.slice(-1)[0].id),s.$$.dirty&17&&(i=f.target==t||f.source==t?"highlite":"")},[f,d,v,g,t,r,u,c,L]}class Gt extends Pe{constructor(e){super(),Se(this,e,Tl,Dl,De,{datum:0,label:3,updatePosition:1})}}new TextEncoder;function ot(s,e,l){const t=s.slice();return t[23]=e[l],t}function ft(s){let e,l;return{c(){e=A("div"),l=Z("Loading..."),this.h()},l(t){e=C(t,"DIV",{class:!0});var i=M(e);l=K(i,"Loading..."),i.forEach(m),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,i){E(t,e,i),O(e,l)},d(t){t&&m(e)}}}function ut(s){let e,l,t=s[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=dt(ot(s,t,r));const n=r=>G(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=F()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=F()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);E(r,e,a),l=!0},p(r,a){if(a&639){t=r[0];let o;for(o=0;o<t.length;o+=1){const u=ot(r,t,o);i[o]?(i[o].p(u,a),q(i[o],1)):(i[o]=dt(u),i[o].c(),q(i[o],1),i[o].m(e.parentNode,e))}for(ue(),o=t.length;o<i.length;o+=1)n(o);ce()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)q(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)G(i[a]);l=!1},d(r){Le(i,r),r&&m(e)}}}function Ll(s){var t,i;let e,l;return e=new Gt({props:{datum:s[23],updatePosition:s[3],label:((i=(t=s[23])==null?void 0:t.property)==null?void 0:i.replace(se,""))||""}}),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p(n,r){var o,u;const a={};r&1&&(a.datum=n[23]),r&8&&(a.updatePosition=n[3]),r&1&&(a.label=((u=(o=n[23])==null?void 0:o.property)==null?void 0:u.replace(se,""))||""),e.$set(a)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){G(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function Nl(s){let e,l,t=s[23].target&&s[23].source!=s[23].target&&ct(s);return{c(){t&&t.c(),e=F()},l(i){t&&t.l(i),e=F()},m(i,n){t&&t.m(i,n),E(i,e,n),l=!0},p(i,n){i[23].target&&i[23].source!=i[23].target?t?(t.p(i,n),n&1&&q(t,1)):(t=ct(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ue(),G(t,1,1,()=>{t=null}),ce())},i(i){l||(q(t),l=!0)},o(i){G(t),l=!1},d(i){t&&t.d(i),i&&m(e)}}}function ct(s){var u,c;let e,l,t,i,n;const r=[Cl,Al],a=[];function o(f,g){var d;return(d=f[23])!=null&&d.external?1:0}return e=o(s),l=a[e]=r[e](s),i=new Gt({props:{datum:s[23],updatePosition:s[3],label:((c=(u=s[23])==null?void 0:u.property)==null?void 0:c.replace(se,""))||""}}),{c(){l.c(),t=W(),ge(i.$$.fragment)},l(f){l.l(f),t=X(f),be(i.$$.fragment,f)},m(f,g){a[e].m(f,g),E(f,t,g),ve(i,f,g),n=!0},p(f,g){var b,S;let d=e;e=o(f),e===d?a[e].p(f,g):(ue(),G(a[d],1,1,()=>{a[d]=null}),ce(),l=a[e],l?l.p(f,g):(l=a[e]=r[e](f),l.c()),q(l,1),l.m(t.parentNode,t));const v={};g&1&&(v.datum=f[23]),g&8&&(v.updatePosition=f[3]),g&1&&(v.label=((S=(b=f[23])==null?void 0:b.property)==null?void 0:S.replace(se,""))||""),i.$set(v)},i(f){n||(q(l),q(i.$$.fragment,f),n=!0)},o(f){G(l),G(i.$$.fragment,f),n=!1},d(f){a[e].d(f),f&&m(t),ke(i,f)}}}function Al(s){let e,l,t,i;return l=new Ft({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),{c(){e=A("a"),ge(l.$$.fragment),this.h()},l(n){e=C(n,"A",{href:!0,target:!0,rel:!0});var r=M(e);be(l.$$.fragment,r),r.forEach(m),this.h()},h(){p(e,"href",t=s[23].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){E(n,e,r),ve(l,e,null),i=!0},p(n,r){const a={};r&64&&(a.site=n[6]),r&4&&(a.entities=n[2]),r&8&&(a.updatePosition=n[3]),r&1&&(a.datum=n[23]),r&32&&(a.essaysItems=n[5]),l.$set(a),(!i||r&1&&t!==(t=n[23].target))&&p(e,"href",t)},i(n){i||(q(l.$$.fragment,n),i=!0)},o(n){G(l.$$.fragment,n),i=!1},d(n){n&&m(e),ke(l)}}}function Cl(s){let e,l;function t(){return s[16](s[23])}function i(){return s[17](s[23])}return e=new Ft({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),e.$on("click",t),e.$on("keydown",i),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p(n,r){s=n;const a={};r&64&&(a.site=s[6]),r&4&&(a.entities=s[2]),r&8&&(a.updatePosition=s[3]),r&1&&(a.datum=s[23]),r&32&&(a.essaysItems=s[5]),e.$set(a)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){G(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function dt(s){let e,l,t,i,n;function r(...c){return s[15](s[23],...c)}const a=[Nl,Ll],o=[];function u(c,f){return f&3&&(e=null),e==null&&(e=!!c[1].some(r)),e?0:c[23].source&&c[23].target&&c[23].source!=c[23].target?1:-1}return~(l=u(s,-1))&&(t=o[l]=a[l](s)),{c(){t&&t.c(),i=F()},l(c){t&&t.l(c),i=F()},m(c,f){~l&&o[l].m(c,f),E(c,i,f),n=!0},p(c,f){s=c;let g=l;l=u(s,f),l===g?~l&&o[l].p(s,f):(t&&(ue(),G(o[g],1,1,()=>{o[g]=null}),ce()),~l?(t=o[l],t?t.p(s,f):(t=o[l]=a[l](s),t.c()),q(t,1),t.m(i.parentNode,i)):t=null)},i(c){n||(q(t),n=!0)},o(c){G(t),n=!1},d(c){~l&&o[l].d(c),c&&m(i)}}}function Ol(s){let e,l,t,i=s[0]&&typeof s[0]=="object"&&Object.keys(s[0]).length>0,n,r=s[8]&&ft(),a=i&&ut(s);return{c(){e=A("section"),r&&r.c(),l=W(),t=A("div"),a&&a.c()},l(o){e=C(o,"SECTION",{});var u=M(e);r&&r.l(u),l=X(u),t=C(u,"DIV",{});var c=M(t);a&&a.l(c),c.forEach(m),u.forEach(m)},m(o,u){E(o,e,u),r&&r.m(e,null),O(e,l),O(e,t),a&&a.m(t,null),s[18](e),n=!0},p(o,[u]){o[8]?r||(r=ft(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),u&1&&(i=o[0]&&typeof o[0]=="object"&&Object.keys(o[0]).length>0),i?a?(a.p(o,u),u&1&&q(a,1)):(a=ut(o),a.c(),q(a,1),a.m(t,null)):a&&(ue(),G(a,1,1,()=>{a=null}),ce())},i(o){n||(q(a),n=!0)},o(o){G(a),n=!1},d(o){o&&m(e),r&&r.d(),a&&a.d(),s[18](null)}}}function Ml(s){let e=document.querySelector(`#col_${s}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function Vl(s,e){return e.filter(l=>!s.some(t=>t.target===l.target||t.id===l.target))}function ql(s,e,l){let t,i=$,n=()=>(i(),i=Ve(d,T=>l(20,t=T)),d),r,a;Q(s,he,T=>l(21,r=T)),Q(s,Be,T=>l(22,a=T)),s.$$.on_destroy.push(()=>i());let{category:o}=e,{data:u}=e,{newData:c}=e,{dataLen:f}=e,{entities:g}=e,{updatePosition:d}=e;n();let{index:v}=e,{loadData:b}=e,{defaultNodes:S}=e,{batchSize:y}=e,{essaysItems:L}=e,{site:_}=e,w,P,h={nodes:[],links:[]};async function k(T,J){Ml(J),l(8,P=!0),r.splice(J,r.length-J);let ae=r.map(j=>j.data).flat();const V=a.find(j=>j["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/"));if(V!=null&&V["o:items"]&&r.length==1){let j=[];V["o:items"]["@id"],a.find(I=>I["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")).forEach(I=>{j.push(I)});let fe=j.map(I=>{var z,ne;return{title:I[oe.title]||((z=I.data)==null?void 0:z["@id"]),"@id":I["@id"],thumbnail_display_urls:((ne=I[oe.img[0]])==null?void 0:ne[0]["@id"])||getNestedValue(I,oe.img.join("."))}});V.related={...fe}}h=await jt([{data:V}]);let ie=h.links.filter(j=>j.source==T.target||j.target==T.target),le=Vl([...S,...ae],ie),D=ie.slice(0,y);x(he,r[J]={id:T.target,data:ie.sort((j,R)=>{if(j.property)return j.property.localeCompare(R.property)}),page:0,new:le,paginate:D},r),l(8,P=!1),le.length>0&&b(D,y),x(d,t=!0,t)}const N=(T,J)=>(J==null?void 0:J.title)===T.title,B=T=>{k(T,v+1)},U=T=>{k(T,v+1)};function Y(T){Ee[T?"unshift":"push"](()=>{w=T,l(7,w)})}return s.$$set=T=>{"category"in T&&l(10,o=T.category),"data"in T&&l(0,u=T.data),"newData"in T&&l(1,c=T.newData),"dataLen"in T&&l(11,f=T.dataLen),"entities"in T&&l(2,g=T.entities),"updatePosition"in T&&n(l(3,d=T.updatePosition)),"index"in T&&l(4,v=T.index),"loadData"in T&&l(12,b=T.loadData),"defaultNodes"in T&&l(13,S=T.defaultNodes),"batchSize"in T&&l(14,y=T.batchSize),"essaysItems"in T&&l(5,L=T.essaysItems),"site"in T&&l(6,_=T.site)},[u,c,g,d,v,L,_,w,P,k,o,f,b,S,y,N,B,U,Y]}class Bt extends Pe{constructor(e){super(),Se(this,e,ql,Ol,De,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function _t(s,e,l){const t=s.slice();return t[35]=e[l],t[37]=l,t}function Re(s){const e=s.slice(),l=e[35].paginate.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property)));e[38]=l;const t=e[35].data.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property))).length;return e[39]=t,e}function ht(s,e,l){const t=s.slice();t[40]=e[l];const i=t[35].paginate.filter(function(...a){return s[20](t[40],...a)});t[41]=i;const n=t[35].data.filter(function(...a){return s[21](t[40],...a)}).length;return t[39]=n,t}function jl(s){let e,l,t=s[5],i=[];for(let r=0;r<t.length;r+=1)i[r]=yt(_t(s,t,r));const n=r=>G(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=F()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=F()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);E(r,e,a),l=!0},p(r,a){if(a[0]&16063){t=r[5];let o;for(o=0;o<t.length;o+=1){const u=_t(r,t,o);i[o]?(i[o].p(u,a),q(i[o],1)):(i[o]=yt(u),i[o].c(),q(i[o],1),i[o].m(e.parentNode,e))}for(ue(),o=t.length;o<i.length;o+=1)n(o);ce()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)q(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)G(i[a]);l=!1},d(r){Le(i,r),r&&m(e)}}}function zl(s){let e,l,t;return{c(){e=A("div"),l=A("h4"),t=Z("Loading Graph..."),this.h()},l(i){e=C(i,"DIV",{});var n=M(e);l=C(n,"H4",{class:!0});var r=M(l);t=K(r,"Loading Graph..."),r.forEach(m),n.forEach(m),this.h()},h(){p(l,"class","loading svelte-4h2tw7")},m(i,n){E(i,e,n),O(e,l),O(l,t)},p:$,i:$,o:$,d(i){i&&m(e)}}}function mt(s){let e,l,t,i=s[35].paginate.filter(s[19]).length>0,n,r,a,o,u,c=s[3].mainCategories,f=[];for(let b=0;b<c.length;b+=1)f[b]=gt(ht(s,c,b));const g=b=>G(f[b],1,1,()=>{f[b]=null});let d=i&&bt(Re(s)),v=s[35].paginate.length<s[35].new.length&&kt(s);return{c(){e=A("div"),l=A("div");for(let b=0;b<f.length;b+=1)f[b].c();t=W(),d&&d.c(),n=W(),v&&v.c(),r=W(),this.h()},l(b){e=C(b,"DIV",{class:!0,id:!0});var S=M(e);l=C(S,"DIV",{});var y=M(l);for(let L=0;L<f.length;L+=1)f[L].l(y);t=X(y),d&&d.l(y),n=X(y),v&&v.l(y),y.forEach(m),S.forEach(m),r=X(b),this.h()},h(){p(e,"class","links svelte-4h2tw7"),p(e,"id","col_"+s[37])},m(b,S){E(b,e,S),O(e,l);for(let y=0;y<f.length;y+=1)f[y].m(l,null);O(l,t),d&&d.m(l,null),O(l,n),v&&v.m(l,null),s[24](e),E(b,r,S),a=!0,o||(u=[H(e,"scroll",s[25]),H(e,"click",s[26]),H(e,"keypress",s[27])],o=!0)},p(b,S){if(S[0]&7725){c=b[3].mainCategories;let y;for(y=0;y<c.length;y+=1){const L=ht(b,c,y);f[y]?(f[y].p(L,S),q(f[y],1)):(f[y]=gt(L),f[y].c(),q(f[y],1),f[y].m(l,t))}for(ue(),y=c.length;y<f.length;y+=1)g(y);ce()}S[0]&40&&(i=b[35].paginate.filter(b[19]).length>0),i?d?(d.p(Re(b),S),S[0]&40&&q(d,1)):(d=bt(Re(b)),d.c(),q(d,1),d.m(l,n)):d&&(ue(),G(d,1,1,()=>{d=null}),ce()),b[35].paginate.length<b[35].new.length?v?v.p(b,S):(v=kt(b),v.c(),v.m(l,null)):v&&(v.d(1),v=null)},i(b){if(!a){for(let S=0;S<c.length;S+=1)q(f[S]);q(d),a=!0}},o(b){f=f.filter(Boolean);for(let S=0;S<f.length;S+=1)G(f[S]);G(d),a=!1},d(b){b&&m(e),Le(f,b),d&&d.d(),v&&v.d(),s[24](null),b&&m(r),o=!1,ye(u)}}}function pt(s){let e,l;return e=new Bt({props:{site:s[3].publicSite,essaysItems:s[2],category:s[40].key,data:s[41],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ge(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,i){ve(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&8&&(n.category=t[40].key),i[0]&40&&(n.data=t[41]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){G(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function gt(s){let e,l,t=s[41].length>0&&pt(s);return{c(){t&&t.c(),e=F()},l(i){t&&t.l(i),e=F()},m(i,n){t&&t.m(i,n),E(i,e,n),l=!0},p(i,n){i[41].length>0?t?(t.p(i,n),n[0]&40&&q(t,1)):(t=pt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ue(),G(t,1,1,()=>{t=null}),ce())},i(i){l||(q(t),l=!0)},o(i){G(t),l=!1},d(i){t&&t.d(i),i&&m(e)}}}function bt(s){let e,l,t=s[38].length>0&&vt(s);return{c(){t&&t.c(),e=F()},l(i){t&&t.l(i),e=F()},m(i,n){t&&t.m(i,n),E(i,e,n),l=!0},p(i,n){i[38].length>0?t?(t.p(i,n),n[0]&40&&q(t,1)):(t=vt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ue(),G(t,1,1,()=>{t=null}),ce())},i(i){l||(q(t),l=!0)},o(i){G(t),l=!1},d(i){t&&t.d(i),i&&m(e)}}}function vt(s){let e,l;return e=new Bt({props:{site:s[3].publicSite,essaysItems:s[2],category:"",data:s[38],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ge(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,i){ve(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&40&&(n.data=t[38]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){G(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function kt(s){let e,l,t,i;function n(){return s[22](s[37])}function r(){return s[23](s[37])}return{c(){e=A("div"),l=Z("Load more"),this.h()},l(a){e=C(a,"DIV",{class:!0});var o=M(e);l=K(o,"Load more"),o.forEach(m),this.h()},h(){p(e,"class","more svelte-4h2tw7")},m(a,o){E(a,e,o),O(e,l),t||(i=[H(e,"click",n),H(e,"keydown",r)],t=!0)},p(a,o){s=a},d(a){a&&m(e),t=!1,ye(i)}}}function yt(s){var i,n;let e,l,t=((i=s[35])==null?void 0:i.new)&&((n=s[35])==null?void 0:n.new.length)>0&&mt(s);return{c(){t&&t.c(),e=F()},l(r){t&&t.l(r),e=F()},m(r,a){t&&t.m(r,a),E(r,e,a),l=!0},p(r,a){var o,u;(o=r[35])!=null&&o.new&&((u=r[35])==null?void 0:u.new.length)>0?t?(t.p(r,a),a[0]&32&&q(t,1)):(t=mt(r),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ue(),G(t,1,1,()=>{t=null}),ce())},i(r){l||(q(t),l=!0)},o(r){G(t),l=!1},d(r){t&&t.d(r),r&&m(e)}}}function It(s){let e,l,t,i;return{c(){e=A("div"),l=Z("✕"),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);l=K(r,"✕"),r.forEach(m),this.h()},h(){p(e,"class","close svelte-4h2tw7")},m(n,r){E(n,e,r),O(e,l),t||(i=[H(e,"click",s[29]),H(e,"keypress",s[30])],t=!0)},p:$,d(n){n&&m(e),t=!1,ye(i)}}}function Fl(s){let e,l,t,i,n,r;const a=[zl,jl],o=[];function u(f,g){return f[8].length==0?0:1}l=u(s),t=o[l]=a[l](s);let c=s[5].length>1&&It(s);return{c(){e=A("div"),t.c(),i=W(),c&&c.c(),n=F(),this.h()},l(f){e=C(f,"DIV",{class:!0});var g=M(e);t.l(g),g.forEach(m),i=X(f),c&&c.l(f),n=F(),this.h()},h(){p(e,"class","graph svelte-4h2tw7")},m(f,g){E(f,e,g),o[l].m(e,null),s[28](e),E(f,i,g),c&&c.m(f,g),E(f,n,g),r=!0},p(f,g){let d=l;l=u(f),l===d?o[l].p(f,g):(ue(),G(o[d],1,1,()=>{o[d]=null}),ce(),t=o[l],t?t.p(f,g):(t=o[l]=a[l](f),t.c()),q(t,1),t.m(e,null)),f[5].length>1?c?c.p(f,g):(c=It(f),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},i(f){r||(q(t),r=!0)},o(f){G(t),r=!1},d(f){f&&m(e),o[l].d(),s[28](null),f&&m(i),c&&c.d(f),f&&m(n)}}}function Gl(s,e,l){const t=l-e;return(s-e)/t*100}function Bl(s,e,l){const t=l-e;return e+t*s/100}function Ul(s,e,l){let t,i,n,r,a;Q(s,Te,I=>l(32,i=I)),Q(s,he,I=>l(5,n=I)),Q(s,Be,I=>l(33,r=I));let{updatePosition:o}=e,{handlePosition:u}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:g}=e,{config:d}=e,{items:v}=e,{screenSize:b}=e,S;const y=pe([]);Q(s,y,I=>l(8,a=I));let L=d.batch,_,w=c.nodes.filter(I=>f.includes(I.id));Ge(async()=>{P(c.nodes,L)}),Ot(()=>{_.lastElementChild&&b>600&&_.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function P(I,z){const ne=I.map(ee=>ee.id||(ee==null?void 0:ee.target)),_e=Math.ceil(ne.length/z);for(let ee=0;ee<_e;ee++){ne.slice(ee*z,(ee+1)*z);let de=r.filter(re=>ne.includes(re["@id"])||I.includes(re["@id"]));y.update(re=>(re.includes(...de)||re.push(...de),re))}}let h;const k=(I,z)=>{var ne,_e,ee,de,re;if(z!=null){const te=((ne=n[I])==null?void 0:ne.page)+1||0;x(he,n[I]={...n[I],page:te,paginate:(_e=n[I])==null?void 0:_e.data.slice(0,te*L)},n),(ee=n[I])!=null&&ee.data&&((de=n[I])==null?void 0:de.paginate.length)!=((re=n[I])==null?void 0:re.data.length)&&P(n[I].paginate.slice(-L),L)}};let N=0;function B(I){var z,ne,_e,ee,de,re;if(i){const te=document.querySelectorAll(".links:first-of-type .node");let Ue=(z=te==null?void 0:te[N])==null?void 0:z.offsetTop,Ut=(ne=te==null?void 0:te[N])==null?void 0:ne.getAttribute("data-id"),We=(_e=te==null?void 0:te[N+1])==null?void 0:_e.offsetTop,Wt=(ee=te==null?void 0:te[N+1])==null?void 0:ee.getAttribute("data-id"),Xt=(de=document.querySelector(`.node-highlite[data-id="${Ut}"]`))==null?void 0:de.offsetTop,Ht=(re=document.querySelector(`.node-highlite[data-id="${Wt}"]`))==null?void 0:re.offsetTop,Yt=Gl(I,Ue,We),Xe=Bl(Yt,Xt,Ht);const Ne=document.querySelector(".markdown__container");I>We&&N++,I<Ue&&N!=0&&N--,Ne&&Xe&&Ue!==We&&Xe>0&&(Ne==null||Ne.scrollTo({top:Xe}))}}const U=I=>!d.mainCategories.some(z=>z.props.includes(I.property)),Y=(I,z)=>I.props.includes(z.property),T=(I,z)=>I.props.includes(z.property),J=I=>k(I,h),ae=I=>k(I,h);function V(I){Ee[I?"unshift":"push"](()=>{h=I,l(7,h)})}const ie=()=>{let I=document.querySelector("#col_0");I.addEventListener("scroll",z=>{l(4,S=I==null?void 0:I.scrollTop)}),u()},le=()=>{u()},D=()=>{u()};function j(I){Ee[I?"unshift":"push"](()=>{_=I,l(6,_)})}const R=()=>{x(he,n=[],n),u()},fe=()=>{x(he,n=[],n)};return s.$$set=I=>{"updatePosition"in I&&l(0,o=I.updatePosition),"handlePosition"in I&&l(1,u=I.handlePosition),"data"in I&&l(14,c=I.data),"visibleItemsID"in I&&l(15,f=I.visibleItemsID),"essaysItems"in I&&l(2,g=I.essaysItems),"config"in I&&l(3,d=I.config),"items"in I&&l(16,v=I.items),"screenSize"in I&&l(17,b=I.screenSize)},s.$$.update=()=>{var I;s.$$.dirty[0]&65544&&l(18,t=v.filter(z=>z==null?void 0:z.data).map(z=>{var ne,_e,ee,de,re,te;return{img:((ee=(_e=z.data[(ne=d.paths.img)==null?void 0:ne[0]])==null?void 0:_e[0])==null?void 0:ee["@id"])||Fe(z.data,d.paths.img.join(".")),source:`item_${z.id}`,target:(de=z.data)==null?void 0:de["@id"],title:((re=z.data)==null?void 0:re[d.paths.title])||((te=z.data)==null?void 0:te["@id"])||""}})),s.$$.dirty[0]&262176&&(n&&n.length==0||he&&((I=n==null?void 0:n[0])==null?void 0:I.data.length)==0)&&x(he,n[0]={data:t,new:t,page:0,paginate:t},n),s.$$.dirty[0]&16&&B(S)},[o,u,g,d,S,n,_,h,a,y,L,w,P,k,c,f,v,b,t,U,Y,T,J,ae,V,ie,le,D,j,R,fe]}class Wl extends Pe{constructor(e){super(),Se(this,e,Ul,Fl,De,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function wt(s,e,l){const t=s.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function Et(s,e,l){const t=s.slice();return t[6]=e[l],t}function Pt(s){let e,l,t=Object.entries(s[0]),i=[];for(let n=0;n<t.length;n+=1)i[n]=Ct(wt(s,t,n));return{c(){e=Ie("svg"),l=Ie("g");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=we(n,"svg",{class:!0});var r=M(e);l=we(r,"g",{});var a=M(l);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(m),r.forEach(m),this.h()},h(){p(e,"class","svelte-1ijue24")},m(n,r){E(n,e,r),O(e,l);for(let a=0;a<i.length;a+=1)i[a].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let a;for(a=0;a<t.length;a+=1){const o=wt(n,t,a);i[a]?i[a].p(o,r):(i[a]=Ct(o),i[a].c(),i[a].m(l,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(n){n&&m(e),Le(i,n)}}}function St(s){let e,l,t=s[6].label+"",i,n,r,a,o,u,c,f,g=s[6].label+"",d,v,b,S,y,L,_=s[6].reverse&&s[6].label&&Dt(),w=!s[6].reverse&&s[6].label&&Tt(),P=s[6].reverse&&s[6].label&&Lt(),h=!s[6].reverse&&s[6].label&&Nt();return{c(){e=Ie("text"),l=Ie("textPath"),i=Z(t),_&&_.c(),n=F(),w&&w.c(),c=Ie("text"),f=Ie("textPath"),d=Z(g),P&&P.c(),v=F(),h&&h.c(),this.h()},l(k){e=we(k,"text",{class:!0,source:!0,target:!0});var N=M(e);l=we(N,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=M(l);i=K(B,t),_&&_.l(B),n=F(),w&&w.l(B),B.forEach(m),N.forEach(m),c=we(k,"text",{class:!0,source:!0,target:!0});var U=M(c);f=we(U,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var Y=M(f);d=K(Y,g),P&&P.l(Y),v=F(),h&&h.l(Y),Y.forEach(m),U.forEach(m),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+s[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",a="background "+s[6].class+" svelte-1ijue24"),p(e,"source",o=s[6].datum.source),p(e,"target",u=s[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",b="#path_"+s[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(c,"class",S=je(s[6].class)+" svelte-1ijue24"),p(c,"source",y=s[6].datum.source),p(c,"target",L=s[6].datum.target)},m(k,N){E(k,e,N),O(e,l),O(l,i),_&&_.m(l,null),O(l,n),w&&w.m(l,null),E(k,c,N),O(c,f),O(f,d),P&&P.m(f,null),O(f,v),h&&h.m(f,null)},p(k,N){N&1&&t!==(t=k[6].label+"")&&me(i,t),k[6].reverse&&k[6].label?_||(_=Dt(),_.c(),_.m(l,n)):_&&(_.d(1),_=null),!k[6].reverse&&k[6].label?w||(w=Tt(),w.c(),w.m(l,null)):w&&(w.d(1),w=null),N&1&&r!==(r="#path_"+k[2])&&p(l,"href",r),N&1&&a!==(a="background "+k[6].class+" svelte-1ijue24")&&p(e,"class",a),N&1&&o!==(o=k[6].datum.source)&&p(e,"source",o),N&1&&u!==(u=k[6].datum.target)&&p(e,"target",u),N&1&&g!==(g=k[6].label+"")&&me(d,g),k[6].reverse&&k[6].label?P||(P=Lt(),P.c(),P.m(f,v)):P&&(P.d(1),P=null),!k[6].reverse&&k[6].label?h||(h=Nt(),h.c(),h.m(f,null)):h&&(h.d(1),h=null),N&1&&b!==(b="#path_"+k[2])&&p(f,"href",b),N&1&&S!==(S=je(k[6].class)+" svelte-1ijue24")&&p(c,"class",S),N&1&&y!==(y=k[6].datum.source)&&p(c,"source",y),N&1&&L!==(L=k[6].datum.target)&&p(c,"target",L)},d(k){k&&m(e),_&&_.d(),w&&w.d(),k&&m(c),P&&P.d(),h&&h.d()}}}function Dt(s){let e;return{c(){e=Z(" -")},l(l){e=K(l," -")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function Tt(s){let e;return{c(){e=Z("→")},l(l){e=K(l,"→")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function Lt(s){let e;return{c(){e=Z("←")},l(l){e=K(l,"←")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function Nt(s){let e;return{c(){e=Z("→")},l(l){e=K(l,"→")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function At(s){let e,l,t,i,n,r,a=(s[1]==s[6].datum.source&&s[6].selected!="not-selected"||s[1]==s[6].datum.target)&&St(s);return{c(){e=Ie("path"),a&&a.c(),r=F(),this.h()},l(o){e=we(o,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),M(e).forEach(m),a&&a.l(o),r=F(),this.h()},h(){p(e,"id",l="path_"+s[2]),p(e,"class",t=je(s[6].class)+" svelte-1ijue24"),p(e,"data-attr",i=s[6].selected),p(e,"d",n=s[6].d)},m(o,u){E(o,e,u),a&&a.m(o,u),E(o,r,u)},p(o,u){u&1&&l!==(l="path_"+o[2])&&p(e,"id",l),u&1&&t!==(t=je(o[6].class)+" svelte-1ijue24")&&p(e,"class",t),u&1&&i!==(i=o[6].selected)&&p(e,"data-attr",i),u&1&&n!==(n=o[6].d)&&p(e,"d",n),o[1]==o[6].datum.source&&o[6].selected!="not-selected"||o[1]==o[6].datum.target?a?a.p(o,u):(a=St(o),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(o){o&&m(e),a&&a.d(o),o&&m(r)}}}function Ct(s){let e,l=s[3],t=[];for(let i=0;i<l.length;i+=1)t[i]=At(Et(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=F()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=F()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);E(i,e,n)},p(i,n){if(n&3){l=i[3];let r;for(r=0;r<l.length;r+=1){const a=Et(i,l,r);t[r]?t[r].p(a,n):(t[r]=At(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Le(t,i),i&&m(e)}}}function Xl(s){let e=Object.keys(s[0]).length>0,l,t=e&&Pt(s);return{c(){t&&t.c(),l=F()},l(i){t&&t.l(i),l=F()},m(i,n){t&&t.m(i,n),E(i,l,n)},p(i,[n]){n&1&&(e=Object.keys(i[0]).length>0),e?t?t.p(i,n):(t=Pt(i),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:$,o:$,d(i){t&&t.d(i),i&&m(l)}}}function Hl(s,e,l){let t,i;return Q(s,Oe,n=>l(0,t=n)),Q(s,ze,n=>l(1,i=n)),[t,i]}class Yl extends Pe{constructor(e){super(),Se(this,e,Hl,Xl,De,{})}}function Jl(s){let e,l,t,i,n,r,a,o,u,c,f;return t=new _l({props:{data:s[11],items:s[3],scrollTopVal:s[7]}}),r=new Wl({props:{items:s[3],data:s[8],screenSize:s[0],essaysItems:s[5],visibleItemsID:s[4],handlePosition:s[13],updatePosition:s[12],config:el}}),o=new Yl({}),{c(){e=A("article"),l=A("section"),ge(t.$$.fragment),i=W(),n=A("section"),ge(r.$$.fragment),a=W(),ge(o.$$.fragment),this.h()},l(g){e=C(g,"ARTICLE",{style:!0,class:!0});var d=M(e);l=C(d,"SECTION",{class:!0});var v=M(l);be(t.$$.fragment,v),v.forEach(m),i=X(d),n=C(d,"SECTION",{class:!0});var b=M(n);be(r.$$.fragment,b),b.forEach(m),a=X(d),be(o.$$.fragment,d),d.forEach(m),this.h()},h(){var g;p(l,"class","markdown__container svelte-1umlmj5"),p(n,"class","graph__container svelte-1umlmj5"),Qt(e,"--theme-color",((g=s[11].meta)==null?void 0:g.color)||"blue"),p(e,"class","svelte-1umlmj5")},m(g,d){E(g,e,d),O(e,l),ve(t,l,null),s[18](l),O(e,i),O(e,n),ve(r,n,null),O(e,a),ve(o,e,null),s[25](e),u=!0,c||(f=[H(l,"wheel",s[19],{passive:!0}),H(l,"scroll",s[20]),H(n,"wheel",s[21],{passive:!0}),H(e,"resize",s[13]),H(e,"scroll",s[22]),H(e,"touchmove",s[23],{passive:!0}),H(e,"click",s[24]),H(e,"keypress",s[16])],c=!0)},p(g,d){const v={};d&8&&(v.items=g[3]),d&128&&(v.scrollTopVal=g[7]),t.$set(v);const b={};d&8&&(b.items=g[3]),d&256&&(b.data=g[8]),d&1&&(b.screenSize=g[0]),d&32&&(b.essaysItems=g[5]),d&16&&(b.visibleItemsID=g[4]),r.$set(b)},i(g){u||(q(t.$$.fragment,g),q(r.$$.fragment,g),q(o.$$.fragment,g),u=!0)},o(g){G(t.$$.fragment,g),G(r.$$.fragment,g),G(o.$$.fragment,g),u=!1},d(g){g&&m(e),ke(t),s[18](null),ke(r),ke(o),s[25](null),c=!1,ye(f)}}}function Rl(s){let e,l,t,i;return{c(){e=A("article"),l=A("section"),t=A("h4"),i=Z("Loading..."),this.h()},l(n){e=C(n,"ARTICLE",{class:!0});var r=M(e);l=C(r,"SECTION",{class:!0});var a=M(l);t=C(a,"H4",{});var o=M(t);i=K(o,"Loading..."),o.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){E(n,e,r),O(e,l),O(l,t),O(t,i)},p:$,i:$,o:$,d(n){n&&m(e)}}}function Zl(s){let e,l,t,i;return{c(){e=A("article"),l=A("section"),t=A("h4"),i=Z("404 Page not found"),this.h()},l(n){e=C(n,"ARTICLE",{class:!0});var r=M(e);l=C(r,"SECTION",{class:!0});var a=M(l);t=C(a,"H4",{});var o=M(t);i=K(o,"404 Page not found"),o.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){E(n,e,r),O(e,l),O(l,t),O(t,i)},p:$,i:$,o:$,d(n){n&&m(e)}}}function Kl(s){var w,P;let e,l,t,i,n,r,a,o,u,c,f,g,d,v,b,S,y,L,_;return document.title=e=((P=(w=s[11])==null?void 0:w.meta)==null?void 0:P.title)||oe.title,{c(){l=W(),t=A("meta"),i=W(),n=A("meta"),r=W(),a=A("meta"),o=W(),u=A("meta"),c=W(),f=A("meta"),g=W(),d=A("meta"),v=W(),b=A("meta"),S=W(),y=A("meta"),L=W(),_=A("meta"),this.h()},l(h){l=X(h),t=C(h,"META",{name:!0,content:!0}),i=X(h),n=C(h,"META",{property:!0,content:!0}),r=X(h),a=C(h,"META",{property:!0,content:!0}),o=X(h),u=C(h,"META",{property:!0,content:!0}),c=X(h),f=C(h,"META",{name:!0,content:!0}),g=X(h),d=C(h,"META",{property:!0,content:!0}),v=X(h),b=C(h,"META",{name:!0,content:!0}),S=X(h),y=C(h,"META",{name:!0,content:!0}),L=X(h),_=C(h,"META",{name:!0,content:!0}),this.h()},h(){var h,k,N,B,U,Y,T,J,ae,V,ie,le,D,j,R,fe;p(t,"name","description"),p(t,"content",((k=(h=s[11])==null?void 0:h.meta)==null?void 0:k.description)||Ye),p(n,"property","og:url"),p(n,"content",se+((N=s[11])==null?void 0:N.path)||se+((B=s[11])==null?void 0:B.path)),p(a,"property","og:description"),p(a,"content",((Y=(U=s[11])==null?void 0:U.meta)==null?void 0:Y.description)||Ye),p(u,"property","og:image"),p(u,"content",((J=(T=s[11])==null?void 0:T.meta)==null?void 0:J.cover)||Qe),p(f,"name","twitter:card"),p(f,"content","summary_large_image"),p(d,"property","twitter:url"),p(d,"content",se+((ae=s[11])==null?void 0:ae.path)||se+((V=s[11])==null?void 0:V.path)),p(b,"name","twitter:title"),p(b,"content",((le=(ie=s[11])==null?void 0:ie.meta)==null?void 0:le.title)||oe.title),p(y,"name","twitter:description"),p(y,"content",((j=(D=s[11])==null?void 0:D.meta)==null?void 0:j.description)||Ye),p(_,"name","twitter:image"),p(_,"content",((fe=(R=s[11])==null?void 0:R.meta)==null?void 0:fe.cover)||Qe)},m(h,k){E(h,l,k),E(h,t,k),E(h,i,k),E(h,n,k),E(h,r,k),E(h,a,k),E(h,o,k),E(h,u,k),E(h,c,k),E(h,f,k),E(h,g,k),E(h,d,k),E(h,v,k),E(h,b,k),E(h,S,k),E(h,y,k),E(h,L,k),E(h,_,k)},p(h,k){var N,B;k&2048&&e!==(e=((B=(N=h[11])==null?void 0:N.meta)==null?void 0:B.title)||oe.title)&&(document.title=e)},d(h){h&&m(l),h&&m(t),h&&m(i),h&&m(n),h&&m(r),h&&m(a),h&&m(o),h&&m(u),h&&m(c),h&&m(f),h&&m(g),h&&m(d),h&&m(v),h&&m(b),h&&m(S),h&&m(y),h&&m(L),h&&m(_)}}}function Ql(s){let e,l,t,i,n,r,a,o;Zt(s[17]);const u=[Zl,Rl,Jl],c=[];function f(d,v){return d[11]==null&&d[2]==null?0:d[2]==null?1:2}l=f(s),t=c[l]=u[l](s);let g=s[11]!=null&&Kl(s);return{c(){e=A("div"),t.c(),i=W(),g&&g.c(),n=F()},l(d){e=C(d,"DIV",{});var v=M(e);t.l(v),v.forEach(m),i=X(d);const b=Kt("svelte-a4gtco",document.head);g&&g.l(b),n=F(),b.forEach(m)},m(d,v){E(d,e,v),c[l].m(e,null),E(d,i,v),g&&g.m(document.head,null),O(document.head,n),r=!0,a||(o=[H(window,"resize",s[13]),H(window,"click",s[13]),H(window,"resize",s[17])],a=!0)},p(d,[v]){let b=l;l=f(d),l===b?c[l].p(d,v):(ue(),G(c[b],1,1,()=>{c[b]=null}),ce(),t=c[l],t?t.p(d,v):(t=c[l]=u[l](d),t.c()),q(t,1),t.m(e,null)),d[11]!=null&&g.p(d,v)},i(d){r||(q(t),r=!0)},o(d){G(t),r=!1},d(d){d&&m(e),c[l].d(),d&&m(i),g&&g.d(d),m(n),a=!1,ye(o)}}}function $l(s,e,l){let t,i,n,r,a,o;Q(s,tl,V=>l(26,t=V)),Q(s,Je,V=>l(8,i=V)),Q(s,ze,V=>l(15,n=V)),Q(s,Me,V=>l(9,a=V)),Q(s,Te,V=>l(10,o=V));let{data:u}=e,c,f,g=[...u.posts].find(V=>V.path.includes(t.params.slug)),d,v,b=[],S=[],y,L;const _=pe(!1);Q(s,_,V=>l(27,r=V));const w=()=>{x(_,r=!0,r)};Ge(async()=>{var le;await hl(),x(Je,i=[],i);const V=Be.subscribe(async D=>{D.length>0&&(l(3,v=await gl(g.text,D)),l(4,b=v.filter(j=>!j.set).map(j=>{var R;return`${(R=j.data)==null?void 0:R["@id"]}`})),l(2,d=await jt(v)),x(Je,i=d,i))}),ie=localStorage.getItem("selectedLanguage")||((le=xt)==null?void 0:le[0]);return l(5,S=u.posts.reduce((D,j)=>(!j.path.includes(t.params.slug)&&j.meta.lang==ie&&j.links.map(R=>{const fe=D.find(z=>z.id===R),I={title:j.meta.title,url:j.path};fe?fe.essays.some(z=>z.title===I.title&&z.url===I.url)||fe.essays.push(I):D.push({id:R,essays:[I]})}),D),[])),()=>V()});function P(V){Ce.call(this,s,V)}function h(){l(0,c=window.innerWidth)}function k(V){Ee[V?"unshift":"push"](()=>{f=V,l(1,f)})}const N=()=>{w(),x(Te,o=!1,o),l(7,L=f==null?void 0:f.scrollTop)},B=()=>{c<1e3&&(w(),l(7,L=f==null?void 0:f.scrollTop),x(Te,o=!1,o))},U=()=>{c>1e3&&x(Te,o=!0,o)},Y=()=>{x(Me,a=y==null?void 0:y.scrollLeft,a)},T=()=>{x(Me,a=y==null?void 0:y.scrollLeft,a),w()},J=()=>{w()};function ae(V){Ee[V?"unshift":"push"](()=>{y=V,l(6,y)})}return s.$$set=V=>{"data"in V&&l(14,u=V.data)},s.$$.update=()=>{s.$$.dirty&32768&&w()},[c,f,d,v,b,S,y,L,i,a,o,g,_,w,u,n,P,h,k,N,B,U,Y,T,J,ae]}class ns extends Pe{constructor(e){super(),Se(this,e,$l,Ql,De,{data:14})}}export{ns as component,is as universal};
