import{_ as Zt}from"../chunks/preload-helper.41c905a7.js";import{S as De,i as Te,s as Le,k as A,q as J,a as B,l as C,m as M,r as Z,h as m,c as X,n as p,b as E,G as O,u as me,H as Q,I as K,o as Be,R as x,L as Ve,M as H,T as Kt,N as we,j as Vt,U as qt,e as j,J as Ae,V as je,W as qe,w as Se,K as Ge,g as q,v as ae,d as U,f as oe,y as ve,z as ke,A as ye,B as Ie,X as Ee,Y as Pe,Z as Ue,_ as Qt,O as $t,p as xt}from"../chunks/index.7c5e5199.js";import{u as ce,b as Re,e as pe,p as fe,t as el,h as tl,l as ll,a as Ye,i as xe,c as sl}from"../chunks/setup.bef6b4ca.js";import{w as ge,e as zt}from"../chunks/singletons.80846dd8.js";import{p as il}from"../chunks/stores.0329f942.js";const nl=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/template.md":()=>Zt(()=>import("../chunks/template.7b886c63.js"),["../chunks/template.7b886c63.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,i])=>{const n=await i(),{html:r}=n.default.render(),a=t.slice(17,-3),o=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,u=[...r.matchAll(o)].map(c=>c[2]).filter(c=>!c.startsWith("http")).map(c=>{const f=c.lastIndexOf("/");return f!==-1?c.substring(f+1):c});return{meta:n.metadata,path:a,text:r,links:u}}))},rl=async({fetch:s})=>({posts:await(await s("/api/posts")).json()}),al=async()=>(await nl()).sort().map(l=>({slug:l.path.replaceAll("/","")})),os=Object.freeze(Object.defineProperty({__proto__:null,entries:al,load:rl},Symbol.toStringTag,{value:"Module"})),Ke=ge(""),We=ge(""),Ne=ge(!1),Je=ge([]),he=ge([]),ze=ge([]),Fe=ge(0);function et(s){var i;let e,l=((i=s[0].meta)==null?void 0:i.description)+"",t;return{c(){e=A("div"),t=J(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=Z(r,l),r.forEach(m),this.h()},h(){p(e,"class","description svelte-rrhrf8")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].meta)==null?void 0:a.description)+"")&&me(t,l)},d(n){n&&m(e)}}}function tt(s){let e,l=s[0].meta.author+"",t;return{c(){e=A("div"),t=J(l),this.h()},l(i){e=C(i,"DIV",{class:!0});var n=M(e);t=Z(n,l),n.forEach(m),this.h()},h(){p(e,"class","author svelte-rrhrf8")},m(i,n){E(i,e,n),O(e,t)},p(i,n){n&1&&l!==(l=i[0].meta.author+"")&&me(t,l)},d(i){i&&m(e)}}}function lt(s){var n;let e,l,t=((n=new Date(s[0].meta.date))==null?void 0:n.toLocaleDateString(s[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",i;return{c(){e=A("div"),l=A("div"),i=J(t),this.h()},l(r){e=C(r,"DIV",{class:!0});var a=M(e);l=C(a,"DIV",{class:!0});var o=M(l);i=Z(o,t),o.forEach(m),a.forEach(m),this.h()},h(){p(l,"class","date svelte-rrhrf8"),p(e,"class","date svelte-rrhrf8")},m(r,a){E(r,e,a),O(e,l),O(l,i)},p(r,a){var o;a&1&&t!==(t=((o=new Date(r[0].meta.date))==null?void 0:o.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&me(i,t)},d(r){r&&m(e)}}}function ol(s){var S,I,L;let e,l,t,i,n=s[0].meta.title+"",r,a,o,u,c,f,g,d=((S=s[0].meta)==null?void 0:S.description)&&et(s),v=((I=s[0].meta)==null?void 0:I.author)&&tt(s),b=((L=s[0].meta)==null?void 0:L.date)&&lt(s);return{c(){e=A("a"),l=J("← Index"),t=B(),i=A("h1"),r=J(n),a=B(),d&&d.c(),o=B(),u=A("div"),v&&v.c(),c=B(),b&&b.c(),f=B(),g=A("div"),this.h()},l(_){e=C(_,"A",{href:!0,class:!0,rel:!0});var w=M(e);l=Z(w,"← Index"),w.forEach(m),t=X(_),i=C(_,"H1",{class:!0});var P=M(i);r=Z(P,n),P.forEach(m),a=X(_),d&&d.l(_),o=X(_),u=C(_,"DIV",{class:!0});var h=M(u);v&&v.l(h),c=X(h),b&&b.l(h),h.forEach(m),f=X(_),g=C(_,"DIV",{class:!0});var k=M(g);k.forEach(m),this.h()},h(){p(e,"href",zt+"/"),p(e,"class","index svelte-rrhrf8"),p(e,"rel","noopener noreferrer"),p(i,"class","svelte-rrhrf8"),p(u,"class","metadata svelte-rrhrf8"),p(g,"class","markdown svelte-rrhrf8")},m(_,w){E(_,e,w),O(e,l),E(_,t,w),E(_,i,w),O(i,r),E(_,a,w),d&&d.m(_,w),E(_,o,w),E(_,u,w),v&&v.m(u,null),O(u,c),b&&b.m(u,null),E(_,f,w),E(_,g,w),g.innerHTML=s[1]},p(_,[w]){var P,h,k;w&1&&n!==(n=_[0].meta.title+"")&&me(r,n),(P=_[0].meta)!=null&&P.description?d?d.p(_,w):(d=et(_),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),(h=_[0].meta)!=null&&h.author?v?v.p(_,w):(v=tt(_),v.c(),v.m(u,c)):v&&(v.d(1),v=null),(k=_[0].meta)!=null&&k.date?b?b.p(_,w):(b=lt(_),b.c(),b.m(u,null)):b&&(b.d(1),b=null)},i:Q,o:Q,d(_){_&&m(e),_&&m(t),_&&m(i),_&&m(a),d&&d.d(_),_&&m(o),_&&m(u),v&&v.d(),b&&b.d(),_&&m(f),_&&m(g)}}}const fl=/\[\^([^\]]+)\]/g;let ul=100;function cl(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),s.currentTarget.classList.add("hover")}function dl(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),s.currentTarget.classList.remove("hover")}function _l(s,e,l){const t=l-e;return(s-e)/t*100}function hl(s,e,l){const t=l-e;return e+t*s/100}function ml(s,e,l){let t,i;K(s,Ne,_=>l(8,t=_)),K(s,Ke,_=>l(9,i=_));let{data:n}=e,{items:r}=e,{scrollTopVal:a}=e,o=n.text,u=1;const f=o.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(_,w,P)=>{if(w.startsWith("http")&!w.startsWith(ce))return`<a class="external" target="_blank" href="${w}" title="${P}">${P}</a>`;{let h=decodeURIComponent(w);return`<a class="node-highlite" unique-id="${h}" id="${decodeURIComponent(w)}"
				data-id="${decodeURIComponent(w)}" title="${P}">${P}
				<span class="symbol node" unique-id="${h}" data-id="item_${decodeURIComponent(w)}"
				data-class="${r.filter(k=>k.label==P).map(k=>{var N,F;return(F=(N=k.data)==null?void 0:N["@type"])==null?void 0:F[1]})}">
					</span></a>`}}).replace(fl,(_,w)=>{const P=u++;return`<sup id="fn-${P}"><a href="#fnref-${P}">${P}</a></sup><span id="fn-${P}-content">${w}</span>`}),g=Array.from({length:u-1},(_,w)=>{var k;const P=w+1,h=(k=f.match(new RegExp(`<span id="fn-${P}-content">([^<]+)</span>`)))==null?void 0:k[1];return`<li id="fnref-${P}"> ${h}</li>`}).join(""),d=`${f}
	<ol class="biblio">${g}</ol>`;let v;Be(async()=>{l(4,v=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),S(v),v.forEach(_=>{_.addEventListener("mouseenter",cl),_.addEventListener("mouseleave",dl),_.addEventListener("click",b)})});function b(_){v.forEach(h=>{const k=h.getAttribute("data-id"),N=document.querySelector(`.node[data-id="${k}"]`);N&&N.classList.remove("clicked"),h.classList.remove("clicked")});const w=_.currentTarget.getAttribute("data-id"),P=document.querySelector(`.node[data-id="${w}"]`);P&&P.classList.toggle("clicked"),_.currentTarget.classList.toggle("clicked"),x(Ke,i=w,i)}function S(_){let w=null;l(4,v=Array.from(_).map(P=>{let h=P.offsetTop;return w!==null&&h<=w?P.adjustedOffsetTop=w+ul:P.adjustedOffsetTop=h,w=P.adjustedOffsetTop,P}))}let I=0;function L(_,w){var P,h,k,N,F,W;if(!t){let R=(P=_==null?void 0:_[I])==null?void 0:P.adjustedOffsetTop,D=(h=_==null?void 0:_[I+1])==null?void 0:h.adjustedOffsetTop,Y=(k=_==null?void 0:_[I])==null?void 0:k.getAttribute("data-id"),re=(N=_==null?void 0:_[I+1])==null?void 0:N.getAttribute("data-id"),V=(F=document.querySelector(`.node[data-id="${Y}"]`))==null?void 0:F.offsetTop,ie=(W=document.querySelector(`.node[data-id="${re}"]`))==null?void 0:W.offsetTop,le=_l(w,R,D),ee=hl(le,V,ie);w>D&&I++,w<R&&I!=0&&I--;const G=document.querySelector(".links:first-of-type");R&&D&&G&&le&&ee&&(G==null||G.scrollTo({top:ee}))}}return s.$$set=_=>{"data"in _&&l(0,n=_.data),"items"in _&&l(2,r=_.items),"scrollTopVal"in _&&l(3,a=_.scrollTopVal)},s.$$.update=()=>{s.$$.dirty&24&&L(v,a)},[n,d,r,a,v]}class pl extends De{constructor(e){super(),Te(this,e,ml,ol,Le,{data:0,items:2,scrollTopVal:3})}}const Xe=ge([]);function gl(s){if(!s||!pe)return s;try{const e=new URL(s),l=new URL(pe),t=e.pathname.indexOf("/api");if(t===-1)return s;const i=e.pathname.slice(t+4),n=l.pathname.replace(/\/$/,"");return l.origin+n+i+(e.search||"")+(e.hash||"")}catch{return s}}function Ft(s){if(!s||typeof s!="object")return s;for(const e in s)if(e==="@id"&&typeof s[e]=="string"){const l=s[e];let t=l.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");t=gl(t),l!==t&&(s[e]=t)}else typeof s[e]=="object"&&Ft(s[e]);return s}async function bl(){try{const s=Re.includes("http")?Re:`${zt}/${Re}`;console.log(`Fetching URL: ${s}`);const e=await fetch(s);if(!e.ok)throw new Error(`Failed to load db: ${e.statusText} (Status: ${e.status})`);const l=e.headers.get("content-type");if(!l||!l.includes("application/json"))throw new Error("Response is not valid JSON");const i=(await e.json()).map(n=>Ft(n));Xe.set(i),console.log("Database loaded and all @id fields normalized.")}catch(s){console.error("Error loading db.json:",s)}}var vl=0;function kl(){return++vl}var Qe=Function("return this")();typeof Qe.__nextId!="function"&&(Qe.__nextId=kl);function jt(){return"uid-"+Qe.__nextId()}async function yl(s,e){const l=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,t=[];let i;for(;i=l.exec(s);)if(!(i[2].includes("http")&&!i[2].includes(ce))){const a=i[3],o=decodeURIComponent(i[2]);t.push({label:a,id:o,url:o,data:[]})}const n=t.filter(a=>a.url).map(a=>a.id);let r=[...Il(n,e)];for(let a=0;a<t.length;a++){const o=t.find(c=>{var f;return(f=r[a])==null?void 0:f["@id"].includes(c.id)}),u=r[a];o&&(o.uniqueId=jt(),o.data=u)}return t}function Il(s,e,l){return e.filter(t=>{var r,a;const i=t["@id"];if(s.includes(i))return!0;const n=(a=(r=i==null?void 0:i.replace(/\/items\//,"/resources/"))==null?void 0:r.replace(/\/media\//,"/resources/"))==null?void 0:a.replace(/\/item_sets\//,"/resources/");return s.includes(n)?!0:s.some(o=>o===i||o===n||i.endsWith("/"+o))})}async function Gt(s){let e=[];for(let t=0;t<s.length;t++)if(s[t].data){let i=s[t].data,n=s[t].set||null,r=wl(i,n);e=[...e,...r]}return{...{nodes:e.reduce((t,i)=>(t.find(n=>n.id===i.source)||t.push({id:i.source,title:i.title}),t.find(n=>n.id===i.target)||t.push({id:i.target,title:i.title}),t),[]),links:e}}}function wl(s,e){var o;let l=[],t=s["@id"];e&&l.push({source:e["@id"],target:t,img:((o=s[fe.img[0]])==null?void 0:o[0]["@id"])||$e(s,fe.img.join(".")),title:s[el]});let i,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/,a=function(u){var c,f,g,d,v,b,S;for(let I in u)if(I==="@id"||I==="@value"&&(u[fe.title]||u.display_title||u["@id"]||n)){let L=u["@id"];L=L==null?void 0:L.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");const _=u[fe.title]||u.display_title||u["@id"],w=(u==null?void 0:u.thumbnail_url)||((g=(f=u==null?void 0:u[(c=fe.img)==null?void 0:c[0]])==null?void 0:f[0])==null?void 0:g["@id"])||$e(u,fe.img.join("."));let P=((v=(d=u[void 0])==null?void 0:d.replace("_"," "))==null?void 0:v.replace(r,""))||(i==null?void 0:i.replace(r,""));!l.some(k=>k.source===t&&k.target===L)&&!tl.includes(P)&&l.push({source:t,target:L,title:_,img:w,property:P,reverse:n,external:!L.includes(ce)})}else typeof u[I]=="object"&&(isNaN(I)&&(i=(S=(b=(I==null?void 0:I.split(":"))[1])==null?void 0:b.split("_"))==null?void 0:S.join(" "),I==="@reverse"&&(n=!0)),a(u[I]))};return a(s),l}function $e(s,e){return e.split(".").reduce((l,t)=>(l||{})[t],s)}function st(s,e,l){const t=s.slice();return t[27]=e[l],t}function El(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(pe,""))||"")+"",t;return{c(){e=A("div"),t=J(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=Z(r,l),r.forEach(m),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(pe,""))||"")+"")&&me(t,l)},d(n){n&&m(e)}}}function Pl(s){let e,l,t,i,n=s[0].title&&!s[0].title.startsWith(pe),r,a,o,u=n&&it(s);return{c(){e=A("img"),i=B(),u&&u.c(),r=j(),this.h()},l(c){e=C(c,"IMG",{src:!0,alt:!0,class:!0}),i=X(c),u&&u.l(c),r=j(),this.h()},h(){Ge(e.src,l=s[5])||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(c,f){E(c,e,f),E(c,i,f),u&&u.m(c,f),E(c,r,f),a||(o=[H(e,"load",s[11]),H(e,"error",Ut)],a=!0)},p(c,f){f&32&&!Ge(e.src,l=c[5])&&p(e,"src",l),f&1&&t!==(t=c[0].title)&&p(e,"alt",t),f&1&&(n=c[0].title&&!c[0].title.startsWith(pe)),n?u?u.p(c,f):(u=it(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(c){c&&m(e),c&&m(i),u&&u.d(c),c&&m(r),a=!1,we(o)}}}function Sl(s){let e,l,t,i,n,r,a,o=s[0].title&&nt(s);return{c(){e=A("img"),i=B(),o&&o.c(),n=j(),this.h()},l(u){e=C(u,"IMG",{src:!0,alt:!0,class:!0}),i=X(u),o&&o.l(u),n=j(),this.h()},h(){Ge(e.src,l=s[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,c){E(u,e,c),E(u,i,c),o&&o.m(u,c),E(u,n,c),r||(a=[H(e,"load",s[11]),H(e,"error",Ut)],r=!0)},p(u,c){c&1&&!Ge(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),c&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,c):(o=nt(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&m(e),u&&m(i),o&&o.d(u),u&&m(n),r=!1,we(a)}}}function it(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(pe,""))||"")+"",t;return{c(){e=A("div"),t=J(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=Z(r,l),r.forEach(m),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(pe,""))||"")+"")&&me(t,l)},d(n){n&&m(e)}}}function nt(s){var i;let e,l=((i=s[0].title)==null?void 0:i.replace(pe,""))+"",t;return{c(){e=A("div"),t=J(l),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);t=Z(r,l),r.forEach(m),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){E(n,e,r),O(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].title)==null?void 0:a.replace(pe,""))+"")&&me(t,l)},d(n){n&&m(e)}}}function rt(s){let e,l=s[8].essays,t=[];for(let i=0;i<l.length;i+=1)t[i]=at(st(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=j()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=j()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);E(i,e,n)},p(i,n){if(n&256){l=i[8].essays;let r;for(r=0;r<l.length;r+=1){const a=st(i,l,r);t[r]?t[r].p(a,n):(t[r]=at(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Ae(t,i),i&&m(e)}}}function at(s){let e,l,t,i=s[27].title+"",n,r;return{c(){e=A("a"),l=J("→"),t=A("em"),n=J(i),this.h()},l(a){e=C(a,"A",{class:!0,href:!0,target:!0,rel:!0});var o=M(e);l=Z(o,"→"),t=C(o,"EM",{});var u=M(t);n=Z(u,i),u.forEach(m),o.forEach(m),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",r=s[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(a,o){E(a,e,o),O(e,l),O(e,t),O(t,n)},p(a,o){o&256&&i!==(i=a[27].title+"")&&me(n,i),o&256&&r!==(r=a[27].url)&&p(e,"href",r)},d(a){a&&m(e)}}}function ot(s){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?Tl:Dl}let t=l(s),i=t(s);return{c(){i.c(),e=j()},l(n){i.l(n),e=j()},m(n,r){i.m(n,r),E(n,e,r)},p(n,r){t===(t=l(n))&&i?i.p(n,r):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){i.d(n),n&&m(e)}}}function Dl(s){let e,l,t;return{c(){e=A("a"),l=J("→ Metadata"),this.h()},l(i){e=C(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=Z(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/item/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){E(i,e,n),O(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/item/${i[4]}`)&&p(e,"href",t)},d(i){i&&m(e)}}}function Tl(s){let e,l,t;return{c(){e=A("a"),l=J("→ Metadata"),this.h()},l(i){e=C(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=Z(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/media/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){E(i,e,n),O(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/media/${i[4]}`)&&p(e,"href",t)},d(i){i&&m(e)}}}function Ll(s){let e,l,t,i,n,r;function a(g,d){return g[0].img?Sl:g[5]?Pl:El}let o=a(s),u=o(s),c=s[8]!=null&&rt(s),f=s[3]&&ot(s);return{c(){e=A("div"),u.c(),l=B(),c&&c.c(),t=B(),f&&f.c(),this.h()},l(g){e=C(g,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=M(e);u.l(d),l=X(d),c&&c.l(d),t=X(d),f&&f.l(d),d.forEach(m),this.h()},h(){p(e,"class","node svelte-189mvtg"),p(e,"title",i=s[0].title),p(e,"source",s[9]),p(e,"target",s[4]),p(e,"data-id",s[4]),Ve(e,"selected",s[7]),Ve(e,"linkToEssay",s[8]!=null)},m(g,d){E(g,e,d),u.m(e,null),O(e,l),c&&c.m(e,null),O(e,t),f&&f.m(e,null),s[20](e),n||(r=[H(e,"mouseover",s[21]),H(e,"mouseleave",function(){Kt(s[13](s[4]))&&s[13](s[4]).apply(this,arguments)}),H(e,"click",s[17]),H(e,"keydown",s[18]),H(e,"focus",s[19])],n=!0)},p(g,[d]){s=g,o===(o=a(s))&&u?u.p(s,d):(u.d(1),u=o(s),u&&(u.c(),u.m(e,l))),s[8]!=null?c?c.p(s,d):(c=rt(s),c.c(),c.m(e,t)):c&&(c.d(1),c=null),s[3]?f?f.p(s,d):(f=ot(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&1&&i!==(i=s[0].title)&&p(e,"title",i),d&512&&p(e,"source",s[9]),d&16&&p(e,"target",s[4]),d&16&&p(e,"data-id",s[4]),d&128&&Ve(e,"selected",s[7]),d&256&&Ve(e,"linkToEssay",s[8]!=null)},i:Q,o:Q,d(g){g&&m(e),u.d(),c&&c.d(),f&&f.d(),s[20](null),n=!1,we(r)}}}function Ut(s){s.target.style.display="none"}function Nl(s,e,l){var ee,G,ne;let t,i,n,r,a,o,u=Q,c=()=>(u(),u=je(I,T=>l(23,o=T)),I),f,g=Q,d=()=>(g(),g=je(L,T=>l(24,f=T)),L),v,b;K(s,he,T=>l(16,a=T)),K(s,Ke,T=>l(25,v=T)),K(s,We,T=>l(10,b=T)),s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>g());let{datum:S}=e,{entities:I}=e;c();let{updatePosition:L}=e;d();let{essaysItems:_}=e,{site:w}=e,{openNode:P}=e,h,k=null;Vt(()=>{const T=S.source;T==`item_${v}`&&T!=k&&P(S,1),k=`item_${v}`}),qt(()=>{x(L,f=!0,f)});function N(){x(L,f=!0,f)}const F=o.find(T=>T["@id"]===S.target);if((ee=F==null?void 0:F.thumbnail_display_urls)!=null&&ee.large)h=F.thumbnail_display_urls.large;else if((G=F==null?void 0:F["o:media"])!=null&&G.length)for(const T of F["o:media"]){const y=o.find(z=>z["@id"]===T["@id"]);if((ne=y==null?void 0:y.thumbnail_display_urls)!=null&&ne.large){h=y.thumbnail_display_urls.large;break}}h||(h="");let W;function R(T){const y=T,z=document.querySelector(`.node-highlite[data-id="${y}"]`);z&&z.classList.add("hover"),W.classList.add("hover")}function D(T){const y=T,z=document.querySelector(`.node-highlite[data-id="${y}"]`);z&&z.classList.remove("hover"),W.classList.remove("hover")}function Y(T){qe.call(this,s,T)}function re(T){qe.call(this,s,T)}function V(T){qe.call(this,s,T)}function ie(T){Se[T?"unshift":"push"](()=>{W=T,l(6,W)})}const le=()=>{x(We,b=i,b),R(i)};return s.$$set=T=>{"datum"in T&&l(0,S=T.datum),"entities"in T&&c(l(1,I=T.entities)),"updatePosition"in T&&d(l(2,L=T.updatePosition)),"essaysItems"in T&&l(14,_=T.essaysItems),"site"in T&&l(3,w=T.site),"openNode"in T&&l(15,P=T.openNode)},s.$$.update=()=>{s.$$.dirty&1&&l(9,t=S==null?void 0:S.source),s.$$.dirty&1&&l(4,i=S==null?void 0:S.target),s.$$.dirty&16400&&l(8,n=_.find(T=>T.id==i)),s.$$.dirty&65537&&l(7,r=a.some(T=>(T==null?void 0:T.id)==S.target))},[S,I,L,w,i,h,W,r,n,t,b,N,R,D,_,P,a,Y,re,V,ie,le]}class Wt extends De{constructor(e){super(),Te(this,e,Nl,Ll,Le,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}function Al(s){let e,l,t;return{c(){e=A("div"),this.h()},l(i){e=C(i,"DIV",{source:!0,target:!0}),M(e).forEach(m),this.h()},h(){p(e,"source",l=s[0].source),p(e,"target",t=s[0].target)},m(i,n){E(i,e,n),s[8](e)},p(i,[n]){n&1&&l!==(l=i[0].source)&&p(e,"source",l),n&1&&t!==(t=i[0].target)&&p(e,"target",t)},i:Q,o:Q,d(i){i&&m(e),s[8](null)}}}let ft=0;function Cl(s,e,l){let t,i,n,r,a=Q,o=()=>(a(),a=je(d,_=>l(5,r=_)),d),u,c;K(s,ze,_=>l(12,n=_)),K(s,Fe,_=>l(6,u=_)),K(s,he,_=>l(7,c=_)),s.$$.on_destroy.push(()=>a());let{datum:f}=e,{label:g}=e,{updatePosition:d}=e;o();let v,b=jt();Be(()=>{I()});function S(_,w=0,P){const h=_,k=[...document.querySelectorAll(`.node[data-id="${h}"]`)],N=[];return k.forEach(F=>{const W=F.getBoundingClientRect(),R={x:W.x+u,y:W.y+w,width:W.width-w/2,height:W.height,selected:"selected"};N.push(R)}),N}function I(){delete n[b],x(d,r=!1,r);const _=S(f.source,ft),w=S(f.target,ft);v&&(v.getBoundingClientRect().x,v.getBoundingClientRect().y),_.forEach(P=>{w.forEach(h=>{let k=100;const N=P==null?void 0:P.selected;let F,W,R,D,Y;F=P.x+P.width,W=P.y,R=h.x,D=h.y,h.x<P.x||h.x==P.x?Y=h.x-k*5:h.x==P.x?Y=h.x-k*3:Y=h.x-k,f.source.includes("item_")&&(Y=h.x-k);const re=F+k,V=W,ie=h.y,le=`M${F},${W}C${re},${V} ${Y},${ie} ${R},${D}`;x(ze,n[b]=n[b]||[],n),n[b].push({class:i,d:le,label:g,selected:N,datum:{source:f.source,target:f.target},reverse:f==null?void 0:f.reverse})})})}qt(()=>{delete n[b],x(ze,n=[],n)});function L(_){Se[_?"unshift":"push"](()=>{v=_,l(2,v)})}return s.$$set=_=>{"datum"in _&&l(0,f=_.datum),"label"in _&&l(3,g=_.label),"updatePosition"in _&&o(l(1,d=_.updatePosition))},s.$$.update=()=>{s.$$.dirty&96&&I(),s.$$.dirty&128&&l(4,t=c.slice(-1)[0].id),s.$$.dirty&17&&(i=f.target==t||f.source==t?"highlite":"")},[f,d,v,g,t,r,u,c,L]}class Bt extends De{constructor(e){super(),Te(this,e,Cl,Al,Le,{datum:0,label:3,updatePosition:1})}}new TextEncoder;function ut(s,e,l){const t=s.slice();return t[23]=e[l],t}function ct(s){let e,l;return{c(){e=A("div"),l=J("Loading..."),this.h()},l(t){e=C(t,"DIV",{class:!0});var i=M(e);l=Z(i,"Loading..."),i.forEach(m),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,i){E(t,e,i),O(e,l)},d(t){t&&m(e)}}}function dt(s){let e,l,t=s[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=ht(ut(s,t,r));const n=r=>U(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=j()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=j()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);E(r,e,a),l=!0},p(r,a){if(a&639){t=r[0];let o;for(o=0;o<t.length;o+=1){const u=ut(r,t,o);i[o]?(i[o].p(u,a),q(i[o],1)):(i[o]=ht(u),i[o].c(),q(i[o],1),i[o].m(e.parentNode,e))}for(ae(),o=t.length;o<i.length;o+=1)n(o);oe()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)q(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)U(i[a]);l=!1},d(r){Ae(i,r),r&&m(e)}}}function Ol(s){var t,i;let e,l;return e=new Bt({props:{datum:s[23],updatePosition:s[3],label:((i=(t=s[23])==null?void 0:t.property)==null?void 0:i.replace(ce,""))||""}}),{c(){ve(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){ye(e,n,r),l=!0},p(n,r){var o,u;const a={};r&1&&(a.datum=n[23]),r&8&&(a.updatePosition=n[3]),r&1&&(a.label=((u=(o=n[23])==null?void 0:o.property)==null?void 0:u.replace(ce,""))||""),e.$set(a)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){U(e.$$.fragment,n),l=!1},d(n){Ie(e,n)}}}function Ml(s){let e,l,t=s[23].target&&s[23].source!=s[23].target&&_t(s);return{c(){t&&t.c(),e=j()},l(i){t&&t.l(i),e=j()},m(i,n){t&&t.m(i,n),E(i,e,n),l=!0},p(i,n){i[23].target&&i[23].source!=i[23].target?t?(t.p(i,n),n&1&&q(t,1)):(t=_t(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),U(t,1,1,()=>{t=null}),oe())},i(i){l||(q(t),l=!0)},o(i){U(t),l=!1},d(i){t&&t.d(i),i&&m(e)}}}function _t(s){var u,c;let e,l,t,i,n;const r=[ql,Vl],a=[];function o(f,g){var d;return(d=f[23])!=null&&d.external?1:0}return e=o(s),l=a[e]=r[e](s),i=new Bt({props:{datum:s[23],updatePosition:s[3],label:((c=(u=s[23])==null?void 0:u.property)==null?void 0:c.replace(ce,""))||""}}),{c(){l.c(),t=B(),ve(i.$$.fragment)},l(f){l.l(f),t=X(f),ke(i.$$.fragment,f)},m(f,g){a[e].m(f,g),E(f,t,g),ye(i,f,g),n=!0},p(f,g){var b,S;let d=e;e=o(f),e===d?a[e].p(f,g):(ae(),U(a[d],1,1,()=>{a[d]=null}),oe(),l=a[e],l?l.p(f,g):(l=a[e]=r[e](f),l.c()),q(l,1),l.m(t.parentNode,t));const v={};g&1&&(v.datum=f[23]),g&8&&(v.updatePosition=f[3]),g&1&&(v.label=((S=(b=f[23])==null?void 0:b.property)==null?void 0:S.replace(ce,""))||""),i.$set(v)},i(f){n||(q(l),q(i.$$.fragment,f),n=!0)},o(f){U(l),U(i.$$.fragment,f),n=!1},d(f){a[e].d(f),f&&m(t),Ie(i,f)}}}function Vl(s){let e,l,t,i;return l=new Wt({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),{c(){e=A("a"),ve(l.$$.fragment),this.h()},l(n){e=C(n,"A",{href:!0,target:!0,rel:!0});var r=M(e);ke(l.$$.fragment,r),r.forEach(m),this.h()},h(){p(e,"href",t=s[23].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){E(n,e,r),ye(l,e,null),i=!0},p(n,r){const a={};r&64&&(a.site=n[6]),r&4&&(a.entities=n[2]),r&8&&(a.updatePosition=n[3]),r&1&&(a.datum=n[23]),r&32&&(a.essaysItems=n[5]),l.$set(a),(!i||r&1&&t!==(t=n[23].target))&&p(e,"href",t)},i(n){i||(q(l.$$.fragment,n),i=!0)},o(n){U(l.$$.fragment,n),i=!1},d(n){n&&m(e),Ie(l)}}}function ql(s){let e,l;function t(){return s[16](s[23])}function i(){return s[17](s[23])}return e=new Wt({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),e.$on("click",t),e.$on("keydown",i),{c(){ve(e.$$.fragment)},l(n){ke(e.$$.fragment,n)},m(n,r){ye(e,n,r),l=!0},p(n,r){s=n;const a={};r&64&&(a.site=s[6]),r&4&&(a.entities=s[2]),r&8&&(a.updatePosition=s[3]),r&1&&(a.datum=s[23]),r&32&&(a.essaysItems=s[5]),e.$set(a)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){U(e.$$.fragment,n),l=!1},d(n){Ie(e,n)}}}function ht(s){let e,l,t,i,n;function r(...c){return s[15](s[23],...c)}const a=[Ml,Ol],o=[];function u(c,f){return f&3&&(e=null),e==null&&(e=!!c[1].some(r)),e?0:c[23].source&&c[23].target&&c[23].source!=c[23].target?1:-1}return~(l=u(s,-1))&&(t=o[l]=a[l](s)),{c(){t&&t.c(),i=j()},l(c){t&&t.l(c),i=j()},m(c,f){~l&&o[l].m(c,f),E(c,i,f),n=!0},p(c,f){s=c;let g=l;l=u(s,f),l===g?~l&&o[l].p(s,f):(t&&(ae(),U(o[g],1,1,()=>{o[g]=null}),oe()),~l?(t=o[l],t?t.p(s,f):(t=o[l]=a[l](s),t.c()),q(t,1),t.m(i.parentNode,i)):t=null)},i(c){n||(q(t),n=!0)},o(c){U(t),n=!1},d(c){~l&&o[l].d(c),c&&m(i)}}}function zl(s){let e,l,t,i=s[0]&&typeof s[0]=="object"&&Object.keys(s[0]).length>0,n,r=s[8]&&ct(),a=i&&dt(s);return{c(){e=A("section"),r&&r.c(),l=B(),t=A("div"),a&&a.c()},l(o){e=C(o,"SECTION",{});var u=M(e);r&&r.l(u),l=X(u),t=C(u,"DIV",{});var c=M(t);a&&a.l(c),c.forEach(m),u.forEach(m)},m(o,u){E(o,e,u),r&&r.m(e,null),O(e,l),O(e,t),a&&a.m(t,null),s[18](e),n=!0},p(o,[u]){o[8]?r||(r=ct(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),u&1&&(i=o[0]&&typeof o[0]=="object"&&Object.keys(o[0]).length>0),i?a?(a.p(o,u),u&1&&q(a,1)):(a=dt(o),a.c(),q(a,1),a.m(t,null)):a&&(ae(),U(a,1,1,()=>{a=null}),oe())},i(o){n||(q(a),n=!0)},o(o){U(a),n=!1},d(o){o&&m(e),r&&r.d(),a&&a.d(),s[18](null)}}}function Fl(s){let e=document.querySelector(`#col_${s}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function jl(s,e){return e.filter(l=>!s.some(t=>t.target===l.target||t.id===l.target))}function Gl(s,e,l){let t,i=Q,n=()=>(i(),i=je(d,D=>l(20,t=D)),d),r,a;K(s,he,D=>l(21,r=D)),K(s,Xe,D=>l(22,a=D)),s.$$.on_destroy.push(()=>i());let{category:o}=e,{data:u}=e,{newData:c}=e,{dataLen:f}=e,{entities:g}=e,{updatePosition:d}=e;n();let{index:v}=e,{loadData:b}=e,{defaultNodes:S}=e,{batchSize:I}=e,{essaysItems:L}=e,{site:_}=e,w,P,h={nodes:[],links:[]};async function k(D,Y){Fl(Y),l(8,P=!0),r.splice(Y,r.length-Y);let re=r.map(G=>G.data).flat();const V=a.find(G=>G["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===D.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/"));if(V!=null&&V["o:items"]&&r.length==1){let G=[];V["o:items"]["@id"],a.find(y=>y["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===D.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")).forEach(y=>{G.push(y)});let T=G.map(y=>{var z,se;return{title:y[fe.title]||((z=y.data)==null?void 0:z["@id"]),"@id":y["@id"],thumbnail_display_urls:((se=y[fe.img[0]])==null?void 0:se[0]["@id"])||getNestedValue(y,fe.img.join("."))}});V.related={...T}}h=await Gt([{data:V}]);let ie=h.links.filter(G=>G.source==D.target||G.target==D.target),le=jl([...S,...re],ie),ee=ie.slice(0,I);x(he,r[Y]={id:D.target,data:ie.sort((G,ne)=>{if(G.property)return G.property.localeCompare(ne.property)}),page:0,new:le,paginate:ee},r),l(8,P=!1),le.length>0&&b(ee,I),x(d,t=!0,t)}const N=(D,Y)=>(Y==null?void 0:Y.title)===D.title,F=D=>{k(D,v+1)},W=D=>{k(D,v+1)};function R(D){Se[D?"unshift":"push"](()=>{w=D,l(7,w)})}return s.$$set=D=>{"category"in D&&l(10,o=D.category),"data"in D&&l(0,u=D.data),"newData"in D&&l(1,c=D.newData),"dataLen"in D&&l(11,f=D.dataLen),"entities"in D&&l(2,g=D.entities),"updatePosition"in D&&n(l(3,d=D.updatePosition)),"index"in D&&l(4,v=D.index),"loadData"in D&&l(12,b=D.loadData),"defaultNodes"in D&&l(13,S=D.defaultNodes),"batchSize"in D&&l(14,I=D.batchSize),"essaysItems"in D&&l(5,L=D.essaysItems),"site"in D&&l(6,_=D.site)},[u,c,g,d,v,L,_,w,P,k,o,f,b,S,I,N,F,W,R]}class Xt extends De{constructor(e){super(),Te(this,e,Gl,zl,Le,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function mt(s,e,l){const t=s.slice();return t[35]=e[l],t[37]=l,t}function Ze(s){const e=s.slice(),l=e[35].paginate.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property)));e[38]=l;const t=e[35].data.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property))).length;return e[39]=t,e}function pt(s,e,l){const t=s.slice();t[40]=e[l];const i=t[35].paginate.filter(function(...a){return s[20](t[40],...a)});t[41]=i;const n=t[35].data.filter(function(...a){return s[21](t[40],...a)}).length;return t[39]=n,t}function Ul(s){let e,l,t=s[5],i=[];for(let r=0;r<t.length;r+=1)i[r]=wt(mt(s,t,r));const n=r=>U(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=j()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=j()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);E(r,e,a),l=!0},p(r,a){if(a[0]&16063){t=r[5];let o;for(o=0;o<t.length;o+=1){const u=mt(r,t,o);i[o]?(i[o].p(u,a),q(i[o],1)):(i[o]=wt(u),i[o].c(),q(i[o],1),i[o].m(e.parentNode,e))}for(ae(),o=t.length;o<i.length;o+=1)n(o);oe()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)q(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)U(i[a]);l=!1},d(r){Ae(i,r),r&&m(e)}}}function Wl(s){let e,l,t;return{c(){e=A("div"),l=A("h4"),t=J("Loading Graph..."),this.h()},l(i){e=C(i,"DIV",{});var n=M(e);l=C(n,"H4",{class:!0});var r=M(l);t=Z(r,"Loading Graph..."),r.forEach(m),n.forEach(m),this.h()},h(){p(l,"class","loading svelte-4h2tw7")},m(i,n){E(i,e,n),O(e,l),O(l,t)},p:Q,i:Q,o:Q,d(i){i&&m(e)}}}function gt(s){let e,l,t,i=s[35].paginate.filter(s[19]).length>0,n,r,a,o,u,c=s[3].mainCategories,f=[];for(let b=0;b<c.length;b+=1)f[b]=vt(pt(s,c,b));const g=b=>U(f[b],1,1,()=>{f[b]=null});let d=i&&kt(Ze(s)),v=s[35].paginate.length<s[35].new.length&&It(s);return{c(){e=A("div"),l=A("div");for(let b=0;b<f.length;b+=1)f[b].c();t=B(),d&&d.c(),n=B(),v&&v.c(),r=B(),this.h()},l(b){e=C(b,"DIV",{class:!0,id:!0});var S=M(e);l=C(S,"DIV",{});var I=M(l);for(let L=0;L<f.length;L+=1)f[L].l(I);t=X(I),d&&d.l(I),n=X(I),v&&v.l(I),I.forEach(m),S.forEach(m),r=X(b),this.h()},h(){p(e,"class","links svelte-4h2tw7"),p(e,"id","col_"+s[37])},m(b,S){E(b,e,S),O(e,l);for(let I=0;I<f.length;I+=1)f[I].m(l,null);O(l,t),d&&d.m(l,null),O(l,n),v&&v.m(l,null),s[24](e),E(b,r,S),a=!0,o||(u=[H(e,"scroll",s[25]),H(e,"click",s[26]),H(e,"keypress",s[27])],o=!0)},p(b,S){if(S[0]&7725){c=b[3].mainCategories;let I;for(I=0;I<c.length;I+=1){const L=pt(b,c,I);f[I]?(f[I].p(L,S),q(f[I],1)):(f[I]=vt(L),f[I].c(),q(f[I],1),f[I].m(l,t))}for(ae(),I=c.length;I<f.length;I+=1)g(I);oe()}S[0]&40&&(i=b[35].paginate.filter(b[19]).length>0),i?d?(d.p(Ze(b),S),S[0]&40&&q(d,1)):(d=kt(Ze(b)),d.c(),q(d,1),d.m(l,n)):d&&(ae(),U(d,1,1,()=>{d=null}),oe()),b[35].paginate.length<b[35].new.length?v?v.p(b,S):(v=It(b),v.c(),v.m(l,null)):v&&(v.d(1),v=null)},i(b){if(!a){for(let S=0;S<c.length;S+=1)q(f[S]);q(d),a=!0}},o(b){f=f.filter(Boolean);for(let S=0;S<f.length;S+=1)U(f[S]);U(d),a=!1},d(b){b&&m(e),Ae(f,b),d&&d.d(),v&&v.d(),s[24](null),b&&m(r),o=!1,we(u)}}}function bt(s){let e,l;return e=new Xt({props:{site:s[3].publicSite,essaysItems:s[2],category:s[40].key,data:s[41],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ve(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,i){ye(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&8&&(n.category=t[40].key),i[0]&40&&(n.data=t[41]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){Ie(e,t)}}}function vt(s){let e,l,t=s[41].length>0&&bt(s);return{c(){t&&t.c(),e=j()},l(i){t&&t.l(i),e=j()},m(i,n){t&&t.m(i,n),E(i,e,n),l=!0},p(i,n){i[41].length>0?t?(t.p(i,n),n[0]&40&&q(t,1)):(t=bt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),U(t,1,1,()=>{t=null}),oe())},i(i){l||(q(t),l=!0)},o(i){U(t),l=!1},d(i){t&&t.d(i),i&&m(e)}}}function kt(s){let e,l,t=s[38].length>0&&yt(s);return{c(){t&&t.c(),e=j()},l(i){t&&t.l(i),e=j()},m(i,n){t&&t.m(i,n),E(i,e,n),l=!0},p(i,n){i[38].length>0?t?(t.p(i,n),n[0]&40&&q(t,1)):(t=yt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),U(t,1,1,()=>{t=null}),oe())},i(i){l||(q(t),l=!0)},o(i){U(t),l=!1},d(i){t&&t.d(i),i&&m(e)}}}function yt(s){let e,l;return e=new Xt({props:{site:s[3].publicSite,essaysItems:s[2],category:"",data:s[38],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ve(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,i){ye(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&40&&(n.data=t[38]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){Ie(e,t)}}}function It(s){let e,l,t,i;function n(){return s[22](s[37])}function r(){return s[23](s[37])}return{c(){e=A("div"),l=J("Load more"),this.h()},l(a){e=C(a,"DIV",{class:!0});var o=M(e);l=Z(o,"Load more"),o.forEach(m),this.h()},h(){p(e,"class","more svelte-4h2tw7")},m(a,o){E(a,e,o),O(e,l),t||(i=[H(e,"click",n),H(e,"keydown",r)],t=!0)},p(a,o){s=a},d(a){a&&m(e),t=!1,we(i)}}}function wt(s){var i,n;let e,l,t=((i=s[35])==null?void 0:i.new)&&((n=s[35])==null?void 0:n.new.length)>0&&gt(s);return{c(){t&&t.c(),e=j()},l(r){t&&t.l(r),e=j()},m(r,a){t&&t.m(r,a),E(r,e,a),l=!0},p(r,a){var o,u;(o=r[35])!=null&&o.new&&((u=r[35])==null?void 0:u.new.length)>0?t?(t.p(r,a),a[0]&32&&q(t,1)):(t=gt(r),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),U(t,1,1,()=>{t=null}),oe())},i(r){l||(q(t),l=!0)},o(r){U(t),l=!1},d(r){t&&t.d(r),r&&m(e)}}}function Et(s){let e,l,t,i;return{c(){e=A("div"),l=J("✕"),this.h()},l(n){e=C(n,"DIV",{class:!0});var r=M(e);l=Z(r,"✕"),r.forEach(m),this.h()},h(){p(e,"class","close svelte-4h2tw7")},m(n,r){E(n,e,r),O(e,l),t||(i=[H(e,"click",s[29]),H(e,"keypress",s[30])],t=!0)},p:Q,d(n){n&&m(e),t=!1,we(i)}}}function Bl(s){let e,l,t,i,n,r;const a=[Wl,Ul],o=[];function u(f,g){return f[8].length==0?0:1}l=u(s),t=o[l]=a[l](s);let c=s[5].length>1&&Et(s);return{c(){e=A("div"),t.c(),i=B(),c&&c.c(),n=j(),this.h()},l(f){e=C(f,"DIV",{class:!0});var g=M(e);t.l(g),g.forEach(m),i=X(f),c&&c.l(f),n=j(),this.h()},h(){p(e,"class","graph svelte-4h2tw7")},m(f,g){E(f,e,g),o[l].m(e,null),s[28](e),E(f,i,g),c&&c.m(f,g),E(f,n,g),r=!0},p(f,g){let d=l;l=u(f),l===d?o[l].p(f,g):(ae(),U(o[d],1,1,()=>{o[d]=null}),oe(),t=o[l],t?t.p(f,g):(t=o[l]=a[l](f),t.c()),q(t,1),t.m(e,null)),f[5].length>1?c?c.p(f,g):(c=Et(f),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},i(f){r||(q(t),r=!0)},o(f){U(t),r=!1},d(f){f&&m(e),o[l].d(),s[28](null),f&&m(i),c&&c.d(f),f&&m(n)}}}function Xl(s,e,l){const t=l-e;return(s-e)/t*100}function Hl(s,e,l){const t=l-e;return e+t*s/100}function Rl(s,e,l){let t,i,n,r,a;K(s,Ne,y=>l(32,i=y)),K(s,he,y=>l(5,n=y)),K(s,Xe,y=>l(33,r=y));let{updatePosition:o}=e,{handlePosition:u}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:g}=e,{config:d}=e,{items:v}=e,{screenSize:b}=e,S;const I=ge([]);K(s,I,y=>l(8,a=y));let L=d.batch,_,w=c.nodes.filter(y=>f.includes(y.id));Be(async()=>{P(c.nodes,L)}),Vt(()=>{_.lastElementChild&&b>600&&_.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function P(y,z){const se=y.map($=>$.id||$.target);c.links&&c.links.forEach($=>{se.includes($.target)||se.push($.target),se.includes($.source)||se.push($.source)});const ue=Array.from(new Set(se)),de=Math.ceil(ue.length/z);for(let $=0;$<de;$++){const _e=ue.slice($*z,($+1)*z);let te=r.filter(be=>_e.includes(be["@id"]));I.update(be=>{for(const Oe of te)be.some(Ce=>Ce["@id"]===Oe["@id"])||be.push(Oe);return be})}}let h;const k=(y,z)=>{var se,ue,de,$,_e;if(z!=null){const te=((se=n[y])==null?void 0:se.page)+1||0;x(he,n[y]={...n[y],page:te,paginate:(ue=n[y])==null?void 0:ue.data.slice(0,te*L)},n),(de=n[y])!=null&&de.data&&(($=n[y])==null?void 0:$.paginate.length)!=((_e=n[y])==null?void 0:_e.data.length)&&P(n[y].paginate.slice(-L),L)}};let N=0;function F(y){var z,se,ue,de,$,_e;if(i){const te=document.querySelectorAll(".links:first-of-type .node");let be=(z=te==null?void 0:te[N])==null?void 0:z.offsetTop,Oe=(se=te==null?void 0:te[N])==null?void 0:se.getAttribute("data-id"),Ce=(ue=te==null?void 0:te[N+1])==null?void 0:ue.offsetTop,Ht=(de=te==null?void 0:te[N+1])==null?void 0:de.getAttribute("data-id"),Rt=($=document.querySelector(`.node-highlite[data-id="${Oe}"]`))==null?void 0:$.offsetTop,Yt=(_e=document.querySelector(`.node-highlite[data-id="${Ht}"]`))==null?void 0:_e.offsetTop,Jt=Xl(y,be,Ce),He=Hl(Jt,Rt,Yt);const Me=document.querySelector(".markdown__container");y>Ce&&N++,y<be&&N!=0&&N--,Me&&He&&be!==Ce&&He>0&&(Me==null||Me.scrollTo({top:He}))}}const W=y=>!d.mainCategories.some(z=>z.props.includes(y.property)),R=(y,z)=>y.props.includes(z.property),D=(y,z)=>y.props.includes(z.property),Y=y=>k(y,h),re=y=>k(y,h);function V(y){Se[y?"unshift":"push"](()=>{h=y,l(7,h)})}const ie=()=>{let y=document.querySelector("#col_0");y.addEventListener("scroll",z=>{l(4,S=y==null?void 0:y.scrollTop)}),u()},le=()=>{u()},ee=()=>{u()};function G(y){Se[y?"unshift":"push"](()=>{_=y,l(6,_)})}const ne=()=>{x(he,n=[],n),u()},T=()=>{x(he,n=[],n)};return s.$$set=y=>{"updatePosition"in y&&l(0,o=y.updatePosition),"handlePosition"in y&&l(1,u=y.handlePosition),"data"in y&&l(14,c=y.data),"visibleItemsID"in y&&l(15,f=y.visibleItemsID),"essaysItems"in y&&l(2,g=y.essaysItems),"config"in y&&l(3,d=y.config),"items"in y&&l(16,v=y.items),"screenSize"in y&&l(17,b=y.screenSize)},s.$$.update=()=>{var y;s.$$.dirty[0]&65544&&l(18,t=v.filter(z=>z==null?void 0:z.data).map(z=>{var se,ue,de,$,_e,te;return{img:((de=(ue=z.data[(se=d.paths.img)==null?void 0:se[0]])==null?void 0:ue[0])==null?void 0:de["@id"])||$e(z.data,d.paths.img.join(".")),source:`item_${z.id}`,target:($=z.data)==null?void 0:$["@id"],title:((_e=z.data)==null?void 0:_e[d.paths.title])||((te=z.data)==null?void 0:te["@id"])||""}})),s.$$.dirty[0]&262176&&(n&&n.length==0||he&&((y=n==null?void 0:n[0])==null?void 0:y.data.length)==0)&&x(he,n[0]={data:t,new:t,page:0,paginate:t},n),s.$$.dirty[0]&16&&F(S)},[o,u,g,d,S,n,_,h,a,I,L,w,P,k,c,f,v,b,t,W,R,D,Y,re,V,ie,le,ee,G,ne,T]}class Yl extends De{constructor(e){super(),Te(this,e,Rl,Bl,Le,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function Pt(s,e,l){const t=s.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function St(s,e,l){const t=s.slice();return t[6]=e[l],t}function Dt(s){let e,l,t=Object.entries(s[0]),i=[];for(let n=0;n<t.length;n+=1)i[n]=Mt(Pt(s,t,n));return{c(){e=Ee("svg"),l=Ee("g");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=Pe(n,"svg",{class:!0});var r=M(e);l=Pe(r,"g",{});var a=M(l);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(m),r.forEach(m),this.h()},h(){p(e,"class","svelte-1ijue24")},m(n,r){E(n,e,r),O(e,l);for(let a=0;a<i.length;a+=1)i[a].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let a;for(a=0;a<t.length;a+=1){const o=Pt(n,t,a);i[a]?i[a].p(o,r):(i[a]=Mt(o),i[a].c(),i[a].m(l,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(n){n&&m(e),Ae(i,n)}}}function Tt(s){let e,l,t=s[6].label+"",i,n,r,a,o,u,c,f,g=s[6].label+"",d,v,b,S,I,L,_=s[6].reverse&&s[6].label&&Lt(),w=!s[6].reverse&&s[6].label&&Nt(),P=s[6].reverse&&s[6].label&&At(),h=!s[6].reverse&&s[6].label&&Ct();return{c(){e=Ee("text"),l=Ee("textPath"),i=J(t),_&&_.c(),n=j(),w&&w.c(),c=Ee("text"),f=Ee("textPath"),d=J(g),P&&P.c(),v=j(),h&&h.c(),this.h()},l(k){e=Pe(k,"text",{class:!0,source:!0,target:!0});var N=M(e);l=Pe(N,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var F=M(l);i=Z(F,t),_&&_.l(F),n=j(),w&&w.l(F),F.forEach(m),N.forEach(m),c=Pe(k,"text",{class:!0,source:!0,target:!0});var W=M(c);f=Pe(W,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var R=M(f);d=Z(R,g),P&&P.l(R),v=j(),h&&h.l(R),R.forEach(m),W.forEach(m),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+s[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",a="background "+s[6].class+" svelte-1ijue24"),p(e,"source",o=s[6].datum.source),p(e,"target",u=s[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",b="#path_"+s[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(c,"class",S=Ue(s[6].class)+" svelte-1ijue24"),p(c,"source",I=s[6].datum.source),p(c,"target",L=s[6].datum.target)},m(k,N){E(k,e,N),O(e,l),O(l,i),_&&_.m(l,null),O(l,n),w&&w.m(l,null),E(k,c,N),O(c,f),O(f,d),P&&P.m(f,null),O(f,v),h&&h.m(f,null)},p(k,N){N&1&&t!==(t=k[6].label+"")&&me(i,t),k[6].reverse&&k[6].label?_||(_=Lt(),_.c(),_.m(l,n)):_&&(_.d(1),_=null),!k[6].reverse&&k[6].label?w||(w=Nt(),w.c(),w.m(l,null)):w&&(w.d(1),w=null),N&1&&r!==(r="#path_"+k[2])&&p(l,"href",r),N&1&&a!==(a="background "+k[6].class+" svelte-1ijue24")&&p(e,"class",a),N&1&&o!==(o=k[6].datum.source)&&p(e,"source",o),N&1&&u!==(u=k[6].datum.target)&&p(e,"target",u),N&1&&g!==(g=k[6].label+"")&&me(d,g),k[6].reverse&&k[6].label?P||(P=At(),P.c(),P.m(f,v)):P&&(P.d(1),P=null),!k[6].reverse&&k[6].label?h||(h=Ct(),h.c(),h.m(f,null)):h&&(h.d(1),h=null),N&1&&b!==(b="#path_"+k[2])&&p(f,"href",b),N&1&&S!==(S=Ue(k[6].class)+" svelte-1ijue24")&&p(c,"class",S),N&1&&I!==(I=k[6].datum.source)&&p(c,"source",I),N&1&&L!==(L=k[6].datum.target)&&p(c,"target",L)},d(k){k&&m(e),_&&_.d(),w&&w.d(),k&&m(c),P&&P.d(),h&&h.d()}}}function Lt(s){let e;return{c(){e=J(" -")},l(l){e=Z(l," -")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function Nt(s){let e;return{c(){e=J("→")},l(l){e=Z(l,"→")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function At(s){let e;return{c(){e=J("←")},l(l){e=Z(l,"←")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function Ct(s){let e;return{c(){e=J("→")},l(l){e=Z(l,"→")},m(l,t){E(l,e,t)},d(l){l&&m(e)}}}function Ot(s){let e,l,t,i,n,r,a=(s[1]==s[6].datum.source&&s[6].selected!="not-selected"||s[1]==s[6].datum.target)&&Tt(s);return{c(){e=Ee("path"),a&&a.c(),r=j(),this.h()},l(o){e=Pe(o,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),M(e).forEach(m),a&&a.l(o),r=j(),this.h()},h(){p(e,"id",l="path_"+s[2]),p(e,"class",t=Ue(s[6].class)+" svelte-1ijue24"),p(e,"data-attr",i=s[6].selected),p(e,"d",n=s[6].d)},m(o,u){E(o,e,u),a&&a.m(o,u),E(o,r,u)},p(o,u){u&1&&l!==(l="path_"+o[2])&&p(e,"id",l),u&1&&t!==(t=Ue(o[6].class)+" svelte-1ijue24")&&p(e,"class",t),u&1&&i!==(i=o[6].selected)&&p(e,"data-attr",i),u&1&&n!==(n=o[6].d)&&p(e,"d",n),o[1]==o[6].datum.source&&o[6].selected!="not-selected"||o[1]==o[6].datum.target?a?a.p(o,u):(a=Tt(o),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(o){o&&m(e),a&&a.d(o),o&&m(r)}}}function Mt(s){let e,l=s[3],t=[];for(let i=0;i<l.length;i+=1)t[i]=Ot(St(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=j()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=j()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);E(i,e,n)},p(i,n){if(n&3){l=i[3];let r;for(r=0;r<l.length;r+=1){const a=St(i,l,r);t[r]?t[r].p(a,n):(t[r]=Ot(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Ae(t,i),i&&m(e)}}}function Jl(s){let e=Object.keys(s[0]).length>0,l,t=e&&Dt(s);return{c(){t&&t.c(),l=j()},l(i){t&&t.l(i),l=j()},m(i,n){t&&t.m(i,n),E(i,l,n)},p(i,[n]){n&1&&(e=Object.keys(i[0]).length>0),e?t?t.p(i,n):(t=Dt(i),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:Q,o:Q,d(i){t&&t.d(i),i&&m(l)}}}function Zl(s,e,l){let t,i;return K(s,ze,n=>l(0,t=n)),K(s,We,n=>l(1,i=n)),[t,i]}class Kl extends De{constructor(e){super(),Te(this,e,Zl,Jl,Le,{})}}function Ql(s){let e,l,t,i,n,r,a,o,u,c,f;return t=new pl({props:{data:s[11],items:s[3],scrollTopVal:s[7]}}),r=new Yl({props:{items:s[3],data:s[8],screenSize:s[0],essaysItems:s[5],visibleItemsID:s[4],handlePosition:s[13],updatePosition:s[12],config:sl}}),o=new Kl({}),{c(){e=A("article"),l=A("section"),ve(t.$$.fragment),i=B(),n=A("section"),ve(r.$$.fragment),a=B(),ve(o.$$.fragment),this.h()},l(g){e=C(g,"ARTICLE",{style:!0,class:!0});var d=M(e);l=C(d,"SECTION",{class:!0});var v=M(l);ke(t.$$.fragment,v),v.forEach(m),i=X(d),n=C(d,"SECTION",{class:!0});var b=M(n);ke(r.$$.fragment,b),b.forEach(m),a=X(d),ke(o.$$.fragment,d),d.forEach(m),this.h()},h(){var g;p(l,"class","markdown__container svelte-1umlmj5"),p(n,"class","graph__container svelte-1umlmj5"),xt(e,"--theme-color",((g=s[11].meta)==null?void 0:g.color)||"blue"),p(e,"class","svelte-1umlmj5")},m(g,d){E(g,e,d),O(e,l),ye(t,l,null),s[18](l),O(e,i),O(e,n),ye(r,n,null),O(e,a),ye(o,e,null),s[25](e),u=!0,c||(f=[H(l,"wheel",s[19],{passive:!0}),H(l,"scroll",s[20]),H(n,"wheel",s[21],{passive:!0}),H(e,"resize",s[13]),H(e,"scroll",s[22]),H(e,"touchmove",s[23],{passive:!0}),H(e,"click",s[24]),H(e,"keypress",s[16])],c=!0)},p(g,d){const v={};d&8&&(v.items=g[3]),d&128&&(v.scrollTopVal=g[7]),t.$set(v);const b={};d&8&&(b.items=g[3]),d&256&&(b.data=g[8]),d&1&&(b.screenSize=g[0]),d&32&&(b.essaysItems=g[5]),d&16&&(b.visibleItemsID=g[4]),r.$set(b)},i(g){u||(q(t.$$.fragment,g),q(r.$$.fragment,g),q(o.$$.fragment,g),u=!0)},o(g){U(t.$$.fragment,g),U(r.$$.fragment,g),U(o.$$.fragment,g),u=!1},d(g){g&&m(e),Ie(t),s[18](null),Ie(r),Ie(o),s[25](null),c=!1,we(f)}}}function $l(s){let e,l,t,i;return{c(){e=A("article"),l=A("section"),t=A("h4"),i=J("Loading..."),this.h()},l(n){e=C(n,"ARTICLE",{class:!0});var r=M(e);l=C(r,"SECTION",{class:!0});var a=M(l);t=C(a,"H4",{});var o=M(t);i=Z(o,"Loading..."),o.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){E(n,e,r),O(e,l),O(l,t),O(t,i)},p:Q,i:Q,o:Q,d(n){n&&m(e)}}}function xl(s){let e,l,t,i;return{c(){e=A("article"),l=A("section"),t=A("h4"),i=J("404 Page not found"),this.h()},l(n){e=C(n,"ARTICLE",{class:!0});var r=M(e);l=C(r,"SECTION",{class:!0});var a=M(l);t=C(a,"H4",{});var o=M(t);i=Z(o,"404 Page not found"),o.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){E(n,e,r),O(e,l),O(l,t),O(t,i)},p:Q,i:Q,o:Q,d(n){n&&m(e)}}}function es(s){var w,P;let e,l,t,i,n,r,a,o,u,c,f,g,d,v,b,S,I,L,_;return document.title=e=((P=(w=s[11])==null?void 0:w.meta)==null?void 0:P.title)||fe.title,{c(){l=B(),t=A("meta"),i=B(),n=A("meta"),r=B(),a=A("meta"),o=B(),u=A("meta"),c=B(),f=A("meta"),g=B(),d=A("meta"),v=B(),b=A("meta"),S=B(),I=A("meta"),L=B(),_=A("meta"),this.h()},l(h){l=X(h),t=C(h,"META",{name:!0,content:!0}),i=X(h),n=C(h,"META",{property:!0,content:!0}),r=X(h),a=C(h,"META",{property:!0,content:!0}),o=X(h),u=C(h,"META",{property:!0,content:!0}),c=X(h),f=C(h,"META",{name:!0,content:!0}),g=X(h),d=C(h,"META",{property:!0,content:!0}),v=X(h),b=C(h,"META",{name:!0,content:!0}),S=X(h),I=C(h,"META",{name:!0,content:!0}),L=X(h),_=C(h,"META",{name:!0,content:!0}),this.h()},h(){var h,k,N,F,W,R,D,Y,re,V,ie,le,ee,G,ne,T;p(t,"name","description"),p(t,"content",((k=(h=s[11])==null?void 0:h.meta)==null?void 0:k.description)||Ye),p(n,"property","og:url"),p(n,"content",ce+((N=s[11])==null?void 0:N.path)||ce+((F=s[11])==null?void 0:F.path)),p(a,"property","og:description"),p(a,"content",((R=(W=s[11])==null?void 0:W.meta)==null?void 0:R.description)||Ye),p(u,"property","og:image"),p(u,"content",((Y=(D=s[11])==null?void 0:D.meta)==null?void 0:Y.cover)||xe),p(f,"name","twitter:card"),p(f,"content","summary_large_image"),p(d,"property","twitter:url"),p(d,"content",ce+((re=s[11])==null?void 0:re.path)||ce+((V=s[11])==null?void 0:V.path)),p(b,"name","twitter:title"),p(b,"content",((le=(ie=s[11])==null?void 0:ie.meta)==null?void 0:le.title)||fe.title),p(I,"name","twitter:description"),p(I,"content",((G=(ee=s[11])==null?void 0:ee.meta)==null?void 0:G.description)||Ye),p(_,"name","twitter:image"),p(_,"content",((T=(ne=s[11])==null?void 0:ne.meta)==null?void 0:T.cover)||xe)},m(h,k){E(h,l,k),E(h,t,k),E(h,i,k),E(h,n,k),E(h,r,k),E(h,a,k),E(h,o,k),E(h,u,k),E(h,c,k),E(h,f,k),E(h,g,k),E(h,d,k),E(h,v,k),E(h,b,k),E(h,S,k),E(h,I,k),E(h,L,k),E(h,_,k)},p(h,k){var N,F;k&2048&&e!==(e=((F=(N=h[11])==null?void 0:N.meta)==null?void 0:F.title)||fe.title)&&(document.title=e)},d(h){h&&m(l),h&&m(t),h&&m(i),h&&m(n),h&&m(r),h&&m(a),h&&m(o),h&&m(u),h&&m(c),h&&m(f),h&&m(g),h&&m(d),h&&m(v),h&&m(b),h&&m(S),h&&m(I),h&&m(L),h&&m(_)}}}function ts(s){let e,l,t,i,n,r,a,o;Qt(s[17]);const u=[xl,$l,Ql],c=[];function f(d,v){return d[11]==null&&d[2]==null?0:d[2]==null?1:2}l=f(s),t=c[l]=u[l](s);let g=s[11]!=null&&es(s);return{c(){e=A("div"),t.c(),i=B(),g&&g.c(),n=j()},l(d){e=C(d,"DIV",{});var v=M(e);t.l(v),v.forEach(m),i=X(d);const b=$t("svelte-a4gtco",document.head);g&&g.l(b),n=j(),b.forEach(m)},m(d,v){E(d,e,v),c[l].m(e,null),E(d,i,v),g&&g.m(document.head,null),O(document.head,n),r=!0,a||(o=[H(window,"resize",s[13]),H(window,"click",s[13]),H(window,"resize",s[17])],a=!0)},p(d,[v]){let b=l;l=f(d),l===b?c[l].p(d,v):(ae(),U(c[b],1,1,()=>{c[b]=null}),oe(),t=c[l],t?t.p(d,v):(t=c[l]=u[l](d),t.c()),q(t,1),t.m(e,null)),d[11]!=null&&g.p(d,v)},i(d){r||(q(t),r=!0)},o(d){U(t),r=!1},d(d){d&&m(e),c[l].d(),d&&m(i),g&&g.d(d),m(n),a=!1,we(o)}}}function ls(s,e,l){let t,i,n,r,a,o;K(s,il,V=>l(26,t=V)),K(s,Je,V=>l(8,i=V)),K(s,We,V=>l(15,n=V)),K(s,Fe,V=>l(9,a=V)),K(s,Ne,V=>l(10,o=V));let{data:u}=e,c,f,g=[...u.posts].find(V=>V.path.includes(t.params.slug)),d,v,b=[],S=[],I,L;const _=ge(!1);K(s,_,V=>l(27,r=V));const w=()=>{x(_,r=!0,r)};Be(async()=>{var le;await bl(),x(Je,i=[],i);const V=Xe.subscribe(async ee=>{ee.length>0&&(l(3,v=await yl(g.text,ee)),l(4,b=v.filter(G=>!G.set).map(G=>{var ne;return`${(ne=G.data)==null?void 0:ne["@id"]}`})),l(2,d=await Gt(v)),x(Je,i=d,i))}),ie=localStorage.getItem("selectedLanguage")||((le=ll)==null?void 0:le[0]);return l(5,S=u.posts.reduce((ee,G)=>(!G.path.includes(t.params.slug)&&G.meta.lang==ie&&G.links.map(ne=>{const T=ee.find(z=>z.id===ne),y={title:G.meta.title,url:G.path};T?T.essays.some(z=>z.title===y.title&&z.url===y.url)||T.essays.push(y):ee.push({id:ne,essays:[y]})}),ee),[])),()=>V()});function P(V){qe.call(this,s,V)}function h(){l(0,c=window.innerWidth)}function k(V){Se[V?"unshift":"push"](()=>{f=V,l(1,f)})}const N=()=>{w(),x(Ne,o=!1,o),l(7,L=f==null?void 0:f.scrollTop)},F=()=>{c<1e3&&(w(),l(7,L=f==null?void 0:f.scrollTop),x(Ne,o=!1,o))},W=()=>{c>1e3&&x(Ne,o=!0,o)},R=()=>{x(Fe,a=I==null?void 0:I.scrollLeft,a)},D=()=>{x(Fe,a=I==null?void 0:I.scrollLeft,a),w()},Y=()=>{w()};function re(V){Se[V?"unshift":"push"](()=>{I=V,l(6,I)})}return s.$$set=V=>{"data"in V&&l(14,u=V.data)},s.$$.update=()=>{s.$$.dirty&32768&&w()},[c,f,d,v,b,S,I,L,i,a,o,g,_,w,u,n,P,h,k,N,F,W,R,D,Y,re]}class fs extends De{constructor(e){super(),Te(this,e,ls,ts,Le,{data:14})}}export{fs as component,os as universal};
